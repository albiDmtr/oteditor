import{w as _r,g as Sd}from"./entry.DWC4pRc1.js";import{_ as F}from"./scheduler.BNZeKrfj.js";const mr=(o,p)=>{const u=_r(p),v=localStorage.getItem(o);if(v!=null){const d=JSON.parse(v);p instanceof Map&&Array.isArray(d)?u.set(new Map(d)):u.set(d)}return u.subscribe(d=>{d==null?localStorage.removeItem(o):p instanceof Map&&d instanceof Map?localStorage.setItem(o,JSON.stringify(Array.from(d.entries()))):localStorage.setItem(o,JSON.stringify(d))}),window.addEventListener("storage",()=>{const d=localStorage.getItem(o);if(d==null)return;const x=JSON.parse(d);x!==F(u)&&u.set(x)}),u};function Yd(o){return typeof o.type=="string"&&Array.isArray(o.values)&&o.values.every(p=>Array.isArray(p)&&p.every(u=>typeof u=="number"))}function Ad(o){return typeof o=="object"&&o!==null&&typeof o.name=="string"&&Array.isArray(o.elements)&&o.elements.every(xs)}function xs(o){return typeof o.name=="string"&&typeof o.type=="string"&&(o.damping===void 0||typeof o.damping=="number")&&(o.inertia===void 0||typeof o.inertia=="number")&&(o.excitation===void 0||typeof o.excitation=="object")&&(o.stiffness===void 0||typeof o.stiffness=="number")&&(o.diameter===void 0||typeof o.diameter=="number")&&(o.teeth===void 0||typeof o.teeth=="number")&&(o.parent===void 0||typeof o.parent=="string")&&(o.innerDiameter===void 0||typeof o.innerDiameter=="number")&&(o.outerDiameter===void 0||typeof o.outerDiameter=="number")&&(o.density===void 0||typeof o.density=="number")}function Ss(o){return typeof o=="object"&&o!==null&&typeof o.name=="string"&&typeof o.date=="string"&&Array.isArray(o.components)&&o.components.every($i)&&Array.isArray(o.structure)&&o.structure.every(p=>Array.isArray(p)&&p.every(u=>typeof u=="string"))}const $i=o=>typeof o=="object"&&o!==null&&typeof o.name=="string"&&Array.isArray(o.elements)&&o.elements.every(Ed),Ed=o=>(o.name===void 0||typeof o.name=="string")&&typeof o.type=="string"&&(o.damping===void 0||typeof o.damping=="number")&&(o.inertia===void 0||typeof o.inertia=="number")&&(o.excitation===void 0||typeof o.excitation=="object")&&(o.stiffness===void 0||typeof o.stiffness=="number")&&(o.diameter===void 0||typeof o.diameter=="number")&&(o.teeth===void 0||typeof o.teeth=="number")&&(o.parent===void 0||typeof o.parent=="string")&&(o.innerDiameter===void 0||typeof o.innerDiameter=="number")&&(o.outerDiameter===void 0||typeof o.outerDiameter=="number")&&(o.density===void 0||typeof o.density=="number"),Qe={Disk:{required:["name","type","damping","inertia"],optional:["excitation"]},GearElement:{required:["name","type","inertia","diameter"],optional:["parent","teeth","excitation"]},ShaftDiscrete:{required:["name","type","damping","stiffness"],optional:["excitation"]},ShaftContinuous:{required:["name","type","damping","length","innerDiameter","outerDiameter"],optional:["density","excitation"]}},Zd={damping:"Nms/rad",inertia:"kgm²",stiffness:"Nm/rad",length:"mm",innerDiameter:"mm",outerDiameter:"mm",diameter:"mm",density:"kg/m³"},Xd={name:"string",type:"string",damping:"number",inertia:"number",stiffness:"number",length:"number",innerDiameter:"number",outerDiameter:"number",density:"number",teeth:"number",excitation:"object",parent:"string",diameter:"number"};var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cd(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Qd(o){if(o.__esModule)return o;var p=o.default;if(typeof p=="function"){var u=function v(){return this instanceof v?Reflect.construct(p,arguments,this.constructor):p.apply(this,arguments)};u.prototype=p.prototype}else u={};return Object.defineProperty(u,"__esModule",{value:!0}),Object.keys(o).forEach(function(v){var d=Object.getOwnPropertyDescriptor(o,v);Object.defineProperty(u,v,d.get?d:{enumerable:!0,get:function(){return o[v]}})}),u}var dr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */dr.exports;(function(o,p){(function(){var u,v="4.17.21",d=200,x="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",C="Expected a function",I="Invalid `variable` option passed into `_.template`",k="__lodash_hash_undefined__",S=500,cn="__lodash_placeholder__",Ln=1,ce=2,Sn=4,An=1,Gn=2,T=1,G=2,H=4,tn=8,on=16,gn=32,he=64,Nn=128,Jn=256,ke=512,Os=30,Is="...",Ts=800,Rs=16,Gi=1,Ls=2,Ns=3,Ae=1/0,pe=9007199254740991,Ds=17976931348623157e292,St=NaN,Xn=4294967295,Ws=Xn-1,bs=Xn>>>1,Ps=[["ary",Nn],["bind",T],["bindKey",G],["curry",tn],["curryRight",on],["flip",ke],["partial",gn],["partialRight",he],["rearg",Jn]],be="[object Arguments]",At="[object Array]",Ms="[object AsyncFunction]",Ve="[object Boolean]",je="[object Date]",Us="[object DOMException]",Et="[object Error]",Ct="[object Function]",Ji="[object GeneratorFunction]",Hn="[object Map]",nt="[object Number]",Bs="[object Null]",ee="[object Object]",Hi="[object Promise]",Fs="[object Proxy]",et="[object RegExp]",qn="[object Set]",tt="[object String]",Ot="[object Symbol]",$s="[object Undefined]",rt="[object WeakMap]",Gs="[object WeakSet]",it="[object ArrayBuffer]",Pe="[object DataView]",vr="[object Float32Array]",yr="[object Float64Array]",wr="[object Int8Array]",xr="[object Int16Array]",Sr="[object Int32Array]",Ar="[object Uint8Array]",Er="[object Uint8ClampedArray]",Cr="[object Uint16Array]",Or="[object Uint32Array]",Js=/\b__p \+= '';/g,Hs=/\b(__p \+=) '' \+/g,qs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qi=/&(?:amp|lt|gt|quot|#39);/g,Ki=/[&<>"']/g,Ks=RegExp(qi.source),zs=RegExp(Ki.source),Ys=/<%-([\s\S]+?)%>/g,Zs=/<%([\s\S]+?)%>/g,zi=/<%=([\s\S]+?)%>/g,Xs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qs=/^\w*$/,ks=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ir=/[\\^$.*+?()[\]{}|]/g,Vs=RegExp(Ir.source),Tr=/^\s+/,js=/\s/,no=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eo=/\{\n\/\* \[wrapped with (.+)\] \*/,to=/,? & /,ro=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,io=/[()=,{}\[\]\/\s]/,uo=/\\(\\)?/g,fo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Yi=/\w*$/,so=/^[-+]0x[0-9a-f]+$/i,oo=/^0b[01]+$/i,ao=/^\[object .+?Constructor\]$/,lo=/^0o[0-7]+$/i,co=/^(?:0|[1-9]\d*)$/,ho=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,It=/($^)/,po=/['\n\r\u2028\u2029\\]/g,Tt="\\ud800-\\udfff",go="\\u0300-\\u036f",_o="\\ufe20-\\ufe2f",mo="\\u20d0-\\u20ff",Zi=go+_o+mo,Xi="\\u2700-\\u27bf",Qi="a-z\\xdf-\\xf6\\xf8-\\xff",vo="\\xac\\xb1\\xd7\\xf7",yo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",wo="\\u2000-\\u206f",xo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ki="A-Z\\xc0-\\xd6\\xd8-\\xde",Vi="\\ufe0e\\ufe0f",ji=vo+yo+wo+xo,Rr="['’]",So="["+Tt+"]",nu="["+ji+"]",Rt="["+Zi+"]",eu="\\d+",Ao="["+Xi+"]",tu="["+Qi+"]",ru="[^"+Tt+ji+eu+Xi+Qi+ki+"]",Lr="\\ud83c[\\udffb-\\udfff]",Eo="(?:"+Rt+"|"+Lr+")",iu="[^"+Tt+"]",Nr="(?:\\ud83c[\\udde6-\\uddff]){2}",Dr="[\\ud800-\\udbff][\\udc00-\\udfff]",Me="["+ki+"]",uu="\\u200d",fu="(?:"+tu+"|"+ru+")",Co="(?:"+Me+"|"+ru+")",su="(?:"+Rr+"(?:d|ll|m|re|s|t|ve))?",ou="(?:"+Rr+"(?:D|LL|M|RE|S|T|VE))?",au=Eo+"?",lu="["+Vi+"]?",Oo="(?:"+uu+"(?:"+[iu,Nr,Dr].join("|")+")"+lu+au+")*",Io="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",To="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cu=lu+au+Oo,Ro="(?:"+[Ao,Nr,Dr].join("|")+")"+cu,Lo="(?:"+[iu+Rt+"?",Rt,Nr,Dr,So].join("|")+")",No=RegExp(Rr,"g"),Do=RegExp(Rt,"g"),Wr=RegExp(Lr+"(?="+Lr+")|"+Lo+cu,"g"),Wo=RegExp([Me+"?"+tu+"+"+su+"(?="+[nu,Me,"$"].join("|")+")",Co+"+"+ou+"(?="+[nu,Me+fu,"$"].join("|")+")",Me+"?"+fu+"+"+su,Me+"+"+ou,To,Io,eu,Ro].join("|"),"g"),bo=RegExp("["+uu+Tt+Zi+Vi+"]"),Po=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Uo=-1,X={};X[vr]=X[yr]=X[wr]=X[xr]=X[Sr]=X[Ar]=X[Er]=X[Cr]=X[Or]=!0,X[be]=X[At]=X[it]=X[Ve]=X[Pe]=X[je]=X[Et]=X[Ct]=X[Hn]=X[nt]=X[ee]=X[et]=X[qn]=X[tt]=X[rt]=!1;var Z={};Z[be]=Z[At]=Z[it]=Z[Pe]=Z[Ve]=Z[je]=Z[vr]=Z[yr]=Z[wr]=Z[xr]=Z[Sr]=Z[Hn]=Z[nt]=Z[ee]=Z[et]=Z[qn]=Z[tt]=Z[Ot]=Z[Ar]=Z[Er]=Z[Cr]=Z[Or]=!0,Z[Et]=Z[Ct]=Z[rt]=!1;var Bo={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Fo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$o={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Go={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Jo=parseFloat,Ho=parseInt,hu=typeof wt=="object"&&wt&&wt.Object===Object&&wt,qo=typeof self=="object"&&self&&self.Object===Object&&self,an=hu||qo||Function("return this")(),br=p&&!p.nodeType&&p,Ee=br&&!0&&o&&!o.nodeType&&o,pu=Ee&&Ee.exports===br,Pr=pu&&hu.process,Dn=function(){try{var c=Ee&&Ee.require&&Ee.require("util").types;return c||Pr&&Pr.binding&&Pr.binding("util")}catch{}}(),gu=Dn&&Dn.isArrayBuffer,du=Dn&&Dn.isDate,_u=Dn&&Dn.isMap,mu=Dn&&Dn.isRegExp,vu=Dn&&Dn.isSet,yu=Dn&&Dn.isTypedArray;function En(c,_,g){switch(g.length){case 0:return c.call(_);case 1:return c.call(_,g[0]);case 2:return c.call(_,g[0],g[1]);case 3:return c.call(_,g[0],g[1],g[2])}return c.apply(_,g)}function Ko(c,_,g,E){for(var D=-1,q=c==null?0:c.length;++D<q;){var rn=c[D];_(E,rn,g(rn),c)}return E}function Wn(c,_){for(var g=-1,E=c==null?0:c.length;++g<E&&_(c[g],g,c)!==!1;);return c}function zo(c,_){for(var g=c==null?0:c.length;g--&&_(c[g],g,c)!==!1;);return c}function wu(c,_){for(var g=-1,E=c==null?0:c.length;++g<E;)if(!_(c[g],g,c))return!1;return!0}function ge(c,_){for(var g=-1,E=c==null?0:c.length,D=0,q=[];++g<E;){var rn=c[g];_(rn,g,c)&&(q[D++]=rn)}return q}function Lt(c,_){var g=c==null?0:c.length;return!!g&&Ue(c,_,0)>-1}function Mr(c,_,g){for(var E=-1,D=c==null?0:c.length;++E<D;)if(g(_,c[E]))return!0;return!1}function Q(c,_){for(var g=-1,E=c==null?0:c.length,D=Array(E);++g<E;)D[g]=_(c[g],g,c);return D}function de(c,_){for(var g=-1,E=_.length,D=c.length;++g<E;)c[D+g]=_[g];return c}function Ur(c,_,g,E){var D=-1,q=c==null?0:c.length;for(E&&q&&(g=c[++D]);++D<q;)g=_(g,c[D],D,c);return g}function Yo(c,_,g,E){var D=c==null?0:c.length;for(E&&D&&(g=c[--D]);D--;)g=_(g,c[D],D,c);return g}function Br(c,_){for(var g=-1,E=c==null?0:c.length;++g<E;)if(_(c[g],g,c))return!0;return!1}var Zo=Fr("length");function Xo(c){return c.split("")}function Qo(c){return c.match(ro)||[]}function xu(c,_,g){var E;return g(c,function(D,q,rn){if(_(D,q,rn))return E=q,!1}),E}function Nt(c,_,g,E){for(var D=c.length,q=g+(E?1:-1);E?q--:++q<D;)if(_(c[q],q,c))return q;return-1}function Ue(c,_,g){return _===_?oa(c,_,g):Nt(c,Su,g)}function ko(c,_,g,E){for(var D=g-1,q=c.length;++D<q;)if(E(c[D],_))return D;return-1}function Su(c){return c!==c}function Au(c,_){var g=c==null?0:c.length;return g?Gr(c,_)/g:St}function Fr(c){return function(_){return _==null?u:_[c]}}function $r(c){return function(_){return c==null?u:c[_]}}function Eu(c,_,g,E,D){return D(c,function(q,rn,Y){g=E?(E=!1,q):_(g,q,rn,Y)}),g}function Vo(c,_){var g=c.length;for(c.sort(_);g--;)c[g]=c[g].value;return c}function Gr(c,_){for(var g,E=-1,D=c.length;++E<D;){var q=_(c[E]);q!==u&&(g=g===u?q:g+q)}return g}function Jr(c,_){for(var g=-1,E=Array(c);++g<c;)E[g]=_(g);return E}function jo(c,_){return Q(_,function(g){return[g,c[g]]})}function Cu(c){return c&&c.slice(0,Ru(c)+1).replace(Tr,"")}function Cn(c){return function(_){return c(_)}}function Hr(c,_){return Q(_,function(g){return c[g]})}function ut(c,_){return c.has(_)}function Ou(c,_){for(var g=-1,E=c.length;++g<E&&Ue(_,c[g],0)>-1;);return g}function Iu(c,_){for(var g=c.length;g--&&Ue(_,c[g],0)>-1;);return g}function na(c,_){for(var g=c.length,E=0;g--;)c[g]===_&&++E;return E}var ea=$r(Bo),ta=$r(Fo);function ra(c){return"\\"+Go[c]}function ia(c,_){return c==null?u:c[_]}function Be(c){return bo.test(c)}function ua(c){return Po.test(c)}function fa(c){for(var _,g=[];!(_=c.next()).done;)g.push(_.value);return g}function qr(c){var _=-1,g=Array(c.size);return c.forEach(function(E,D){g[++_]=[D,E]}),g}function Tu(c,_){return function(g){return c(_(g))}}function _e(c,_){for(var g=-1,E=c.length,D=0,q=[];++g<E;){var rn=c[g];(rn===_||rn===cn)&&(c[g]=cn,q[D++]=g)}return q}function Dt(c){var _=-1,g=Array(c.size);return c.forEach(function(E){g[++_]=E}),g}function sa(c){var _=-1,g=Array(c.size);return c.forEach(function(E){g[++_]=[E,E]}),g}function oa(c,_,g){for(var E=g-1,D=c.length;++E<D;)if(c[E]===_)return E;return-1}function aa(c,_,g){for(var E=g+1;E--;)if(c[E]===_)return E;return E}function Fe(c){return Be(c)?ca(c):Zo(c)}function Kn(c){return Be(c)?ha(c):Xo(c)}function Ru(c){for(var _=c.length;_--&&js.test(c.charAt(_)););return _}var la=$r($o);function ca(c){for(var _=Wr.lastIndex=0;Wr.test(c);)++_;return _}function ha(c){return c.match(Wr)||[]}function pa(c){return c.match(Wo)||[]}var ga=function c(_){_=_==null?an:$e.defaults(an.Object(),_,$e.pick(an,Mo));var g=_.Array,E=_.Date,D=_.Error,q=_.Function,rn=_.Math,Y=_.Object,Kr=_.RegExp,da=_.String,bn=_.TypeError,Wt=g.prototype,_a=q.prototype,Ge=Y.prototype,bt=_["__core-js_shared__"],Pt=_a.toString,z=Ge.hasOwnProperty,ma=0,Lu=function(){var n=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Mt=Ge.toString,va=Pt.call(Y),ya=an._,wa=Kr("^"+Pt.call(z).replace(Ir,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=pu?_.Buffer:u,me=_.Symbol,Bt=_.Uint8Array,Nu=Ut?Ut.allocUnsafe:u,Ft=Tu(Y.getPrototypeOf,Y),Du=Y.create,Wu=Ge.propertyIsEnumerable,$t=Wt.splice,bu=me?me.isConcatSpreadable:u,ft=me?me.iterator:u,Ce=me?me.toStringTag:u,Gt=function(){try{var n=Le(Y,"defineProperty");return n({},"",{}),n}catch{}}(),xa=_.clearTimeout!==an.clearTimeout&&_.clearTimeout,Sa=E&&E.now!==an.Date.now&&E.now,Aa=_.setTimeout!==an.setTimeout&&_.setTimeout,Jt=rn.ceil,Ht=rn.floor,zr=Y.getOwnPropertySymbols,Ea=Ut?Ut.isBuffer:u,Pu=_.isFinite,Ca=Wt.join,Oa=Tu(Y.keys,Y),un=rn.max,hn=rn.min,Ia=E.now,Ta=_.parseInt,Mu=rn.random,Ra=Wt.reverse,Yr=Le(_,"DataView"),st=Le(_,"Map"),Zr=Le(_,"Promise"),Je=Le(_,"Set"),ot=Le(_,"WeakMap"),at=Le(Y,"create"),qt=ot&&new ot,He={},La=Ne(Yr),Na=Ne(st),Da=Ne(Zr),Wa=Ne(Je),ba=Ne(ot),Kt=me?me.prototype:u,lt=Kt?Kt.valueOf:u,Uu=Kt?Kt.toString:u;function f(n){if(j(n)&&!W(n)&&!(n instanceof B)){if(n instanceof Pn)return n;if(z.call(n,"__wrapped__"))return Ff(n)}return new Pn(n)}var qe=function(){function n(){}return function(e){if(!V(e))return{};if(Du)return Du(e);n.prototype=e;var t=new n;return n.prototype=u,t}}();function zt(){}function Pn(n,e){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=u}f.templateSettings={escape:Ys,evaluate:Zs,interpolate:zi,variable:"",imports:{_:f}},f.prototype=zt.prototype,f.prototype.constructor=f,Pn.prototype=qe(zt.prototype),Pn.prototype.constructor=Pn;function B(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Xn,this.__views__=[]}function Pa(){var n=new B(this.__wrapped__);return n.__actions__=vn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=vn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=vn(this.__views__),n}function Ma(){if(this.__filtered__){var n=new B(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Ua(){var n=this.__wrapped__.value(),e=this.__dir__,t=W(n),r=e<0,i=t?n.length:0,s=Xl(0,i,this.__views__),a=s.start,l=s.end,h=l-a,m=r?l:a-1,y=this.__iteratees__,w=y.length,A=0,O=hn(h,this.__takeCount__);if(!t||!r&&i==h&&O==h)return of(n,this.__actions__);var L=[];n:for(;h--&&A<O;){m+=e;for(var P=-1,N=n[m];++P<w;){var U=y[P],J=U.iteratee,Tn=U.type,mn=J(N);if(Tn==Ls)N=mn;else if(!mn){if(Tn==Gi)continue n;break n}}L[A++]=N}return L}B.prototype=qe(zt.prototype),B.prototype.constructor=B;function Oe(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function Ba(){this.__data__=at?at(null):{},this.size=0}function Fa(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}function $a(n){var e=this.__data__;if(at){var t=e[n];return t===k?u:t}return z.call(e,n)?e[n]:u}function Ga(n){var e=this.__data__;return at?e[n]!==u:z.call(e,n)}function Ja(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=at&&e===u?k:e,this}Oe.prototype.clear=Ba,Oe.prototype.delete=Fa,Oe.prototype.get=$a,Oe.prototype.has=Ga,Oe.prototype.set=Ja;function te(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function Ha(){this.__data__=[],this.size=0}function qa(n){var e=this.__data__,t=Yt(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():$t.call(e,t,1),--this.size,!0}function Ka(n){var e=this.__data__,t=Yt(e,n);return t<0?u:e[t][1]}function za(n){return Yt(this.__data__,n)>-1}function Ya(n,e){var t=this.__data__,r=Yt(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}te.prototype.clear=Ha,te.prototype.delete=qa,te.prototype.get=Ka,te.prototype.has=za,te.prototype.set=Ya;function re(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function Za(){this.size=0,this.__data__={hash:new Oe,map:new(st||te),string:new Oe}}function Xa(n){var e=ur(this,n).delete(n);return this.size-=e?1:0,e}function Qa(n){return ur(this,n).get(n)}function ka(n){return ur(this,n).has(n)}function Va(n,e){var t=ur(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}re.prototype.clear=Za,re.prototype.delete=Xa,re.prototype.get=Qa,re.prototype.has=ka,re.prototype.set=Va;function Ie(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new re;++e<t;)this.add(n[e])}function ja(n){return this.__data__.set(n,k),this}function nl(n){return this.__data__.has(n)}Ie.prototype.add=Ie.prototype.push=ja,Ie.prototype.has=nl;function zn(n){var e=this.__data__=new te(n);this.size=e.size}function el(){this.__data__=new te,this.size=0}function tl(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function rl(n){return this.__data__.get(n)}function il(n){return this.__data__.has(n)}function ul(n,e){var t=this.__data__;if(t instanceof te){var r=t.__data__;if(!st||r.length<d-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new re(r)}return t.set(n,e),this.size=t.size,this}zn.prototype.clear=el,zn.prototype.delete=tl,zn.prototype.get=rl,zn.prototype.has=il,zn.prototype.set=ul;function Bu(n,e){var t=W(n),r=!t&&De(n),i=!t&&!r&&Se(n),s=!t&&!r&&!i&&Ze(n),a=t||r||i||s,l=a?Jr(n.length,da):[],h=l.length;for(var m in n)(e||z.call(n,m))&&!(a&&(m=="length"||i&&(m=="offset"||m=="parent")||s&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||se(m,h)))&&l.push(m);return l}function Fu(n){var e=n.length;return e?n[ui(0,e-1)]:u}function fl(n,e){return fr(vn(n),Te(e,0,n.length))}function sl(n){return fr(vn(n))}function Xr(n,e,t){(t!==u&&!Yn(n[e],t)||t===u&&!(e in n))&&ie(n,e,t)}function ct(n,e,t){var r=n[e];(!(z.call(n,e)&&Yn(r,t))||t===u&&!(e in n))&&ie(n,e,t)}function Yt(n,e){for(var t=n.length;t--;)if(Yn(n[t][0],e))return t;return-1}function ol(n,e,t,r){return ve(n,function(i,s,a){e(r,i,t(i),a)}),r}function $u(n,e){return n&&kn(e,fn(e),n)}function al(n,e){return n&&kn(e,wn(e),n)}function ie(n,e,t){e=="__proto__"&&Gt?Gt(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Qr(n,e){for(var t=-1,r=e.length,i=g(r),s=n==null;++t<r;)i[t]=s?u:Li(n,e[t]);return i}function Te(n,e,t){return n===n&&(t!==u&&(n=n<=t?n:t),e!==u&&(n=n>=e?n:e)),n}function Mn(n,e,t,r,i,s){var a,l=e&Ln,h=e&ce,m=e&Sn;if(t&&(a=i?t(n,r,i,s):t(n)),a!==u)return a;if(!V(n))return n;var y=W(n);if(y){if(a=kl(n),!l)return vn(n,a)}else{var w=pn(n),A=w==Ct||w==Ji;if(Se(n))return cf(n,l);if(w==ee||w==be||A&&!i){if(a=h||A?{}:Lf(n),!l)return h?$l(n,al(a,n)):Fl(n,$u(a,n))}else{if(!Z[w])return i?n:{};a=Vl(n,w,l)}}s||(s=new zn);var O=s.get(n);if(O)return O;s.set(n,a),us(n)?n.forEach(function(N){a.add(Mn(N,e,t,N,n,s))}):rs(n)&&n.forEach(function(N,U){a.set(U,Mn(N,e,t,U,n,s))});var L=m?h?_i:di:h?wn:fn,P=y?u:L(n);return Wn(P||n,function(N,U){P&&(U=N,N=n[U]),ct(a,U,Mn(N,e,t,U,n,s))}),a}function ll(n){var e=fn(n);return function(t){return Gu(t,n,e)}}function Gu(n,e,t){var r=t.length;if(n==null)return!r;for(n=Y(n);r--;){var i=t[r],s=e[i],a=n[i];if(a===u&&!(i in n)||!s(a))return!1}return!0}function Ju(n,e,t){if(typeof n!="function")throw new bn(C);return vt(function(){n.apply(u,t)},e)}function ht(n,e,t,r){var i=-1,s=Lt,a=!0,l=n.length,h=[],m=e.length;if(!l)return h;t&&(e=Q(e,Cn(t))),r?(s=Mr,a=!1):e.length>=d&&(s=ut,a=!1,e=new Ie(e));n:for(;++i<l;){var y=n[i],w=t==null?y:t(y);if(y=r||y!==0?y:0,a&&w===w){for(var A=m;A--;)if(e[A]===w)continue n;h.push(y)}else s(e,w,r)||h.push(y)}return h}var ve=_f(Qn),Hu=_f(Vr,!0);function cl(n,e){var t=!0;return ve(n,function(r,i,s){return t=!!e(r,i,s),t}),t}function Zt(n,e,t){for(var r=-1,i=n.length;++r<i;){var s=n[r],a=e(s);if(a!=null&&(l===u?a===a&&!In(a):t(a,l)))var l=a,h=s}return h}function hl(n,e,t,r){var i=n.length;for(t=b(t),t<0&&(t=-t>i?0:i+t),r=r===u||r>i?i:b(r),r<0&&(r+=i),r=t>r?0:ss(r);t<r;)n[t++]=e;return n}function qu(n,e){var t=[];return ve(n,function(r,i,s){e(r,i,s)&&t.push(r)}),t}function ln(n,e,t,r,i){var s=-1,a=n.length;for(t||(t=nc),i||(i=[]);++s<a;){var l=n[s];e>0&&t(l)?e>1?ln(l,e-1,t,r,i):de(i,l):r||(i[i.length]=l)}return i}var kr=mf(),Ku=mf(!0);function Qn(n,e){return n&&kr(n,e,fn)}function Vr(n,e){return n&&Ku(n,e,fn)}function Xt(n,e){return ge(e,function(t){return oe(n[t])})}function Re(n,e){e=we(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Vn(e[t++])];return t&&t==r?n:u}function zu(n,e,t){var r=e(n);return W(n)?r:de(r,t(n))}function dn(n){return n==null?n===u?$s:Bs:Ce&&Ce in Y(n)?Zl(n):sc(n)}function jr(n,e){return n>e}function pl(n,e){return n!=null&&z.call(n,e)}function gl(n,e){return n!=null&&e in Y(n)}function dl(n,e,t){return n>=hn(e,t)&&n<un(e,t)}function ni(n,e,t){for(var r=t?Mr:Lt,i=n[0].length,s=n.length,a=s,l=g(s),h=1/0,m=[];a--;){var y=n[a];a&&e&&(y=Q(y,Cn(e))),h=hn(y.length,h),l[a]=!t&&(e||i>=120&&y.length>=120)?new Ie(a&&y):u}y=n[0];var w=-1,A=l[0];n:for(;++w<i&&m.length<h;){var O=y[w],L=e?e(O):O;if(O=t||O!==0?O:0,!(A?ut(A,L):r(m,L,t))){for(a=s;--a;){var P=l[a];if(!(P?ut(P,L):r(n[a],L,t)))continue n}A&&A.push(L),m.push(O)}}return m}function _l(n,e,t,r){return Qn(n,function(i,s,a){e(r,t(i),s,a)}),r}function pt(n,e,t){e=we(e,n),n=bf(n,e);var r=n==null?n:n[Vn(Bn(e))];return r==null?u:En(r,n,t)}function Yu(n){return j(n)&&dn(n)==be}function ml(n){return j(n)&&dn(n)==it}function vl(n){return j(n)&&dn(n)==je}function gt(n,e,t,r,i){return n===e?!0:n==null||e==null||!j(n)&&!j(e)?n!==n&&e!==e:yl(n,e,t,r,gt,i)}function yl(n,e,t,r,i,s){var a=W(n),l=W(e),h=a?At:pn(n),m=l?At:pn(e);h=h==be?ee:h,m=m==be?ee:m;var y=h==ee,w=m==ee,A=h==m;if(A&&Se(n)){if(!Se(e))return!1;a=!0,y=!1}if(A&&!y)return s||(s=new zn),a||Ze(n)?If(n,e,t,r,i,s):zl(n,e,h,t,r,i,s);if(!(t&An)){var O=y&&z.call(n,"__wrapped__"),L=w&&z.call(e,"__wrapped__");if(O||L){var P=O?n.value():n,N=L?e.value():e;return s||(s=new zn),i(P,N,t,r,s)}}return A?(s||(s=new zn),Yl(n,e,t,r,i,s)):!1}function wl(n){return j(n)&&pn(n)==Hn}function ei(n,e,t,r){var i=t.length,s=i,a=!r;if(n==null)return!s;for(n=Y(n);i--;){var l=t[i];if(a&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++i<s;){l=t[i];var h=l[0],m=n[h],y=l[1];if(a&&l[2]){if(m===u&&!(h in n))return!1}else{var w=new zn;if(r)var A=r(m,y,h,n,e,w);if(!(A===u?gt(y,m,An|Gn,r,w):A))return!1}}return!0}function Zu(n){if(!V(n)||tc(n))return!1;var e=oe(n)?wa:ao;return e.test(Ne(n))}function xl(n){return j(n)&&dn(n)==et}function Sl(n){return j(n)&&pn(n)==qn}function Al(n){return j(n)&&hr(n.length)&&!!X[dn(n)]}function Xu(n){return typeof n=="function"?n:n==null?xn:typeof n=="object"?W(n)?Vu(n[0],n[1]):ku(n):vs(n)}function ti(n){if(!mt(n))return Oa(n);var e=[];for(var t in Y(n))z.call(n,t)&&t!="constructor"&&e.push(t);return e}function El(n){if(!V(n))return fc(n);var e=mt(n),t=[];for(var r in n)r=="constructor"&&(e||!z.call(n,r))||t.push(r);return t}function ri(n,e){return n<e}function Qu(n,e){var t=-1,r=yn(n)?g(n.length):[];return ve(n,function(i,s,a){r[++t]=e(i,s,a)}),r}function ku(n){var e=vi(n);return e.length==1&&e[0][2]?Df(e[0][0],e[0][1]):function(t){return t===n||ei(t,n,e)}}function Vu(n,e){return wi(n)&&Nf(e)?Df(Vn(n),e):function(t){var r=Li(t,n);return r===u&&r===e?Ni(t,n):gt(e,r,An|Gn)}}function Qt(n,e,t,r,i){n!==e&&kr(e,function(s,a){if(i||(i=new zn),V(s))Cl(n,e,a,t,Qt,r,i);else{var l=r?r(Si(n,a),s,a+"",n,e,i):u;l===u&&(l=s),Xr(n,a,l)}},wn)}function Cl(n,e,t,r,i,s,a){var l=Si(n,t),h=Si(e,t),m=a.get(h);if(m){Xr(n,t,m);return}var y=s?s(l,h,t+"",n,e,a):u,w=y===u;if(w){var A=W(h),O=!A&&Se(h),L=!A&&!O&&Ze(h);y=h,A||O||L?W(l)?y=l:nn(l)?y=vn(l):O?(w=!1,y=cf(h,!0)):L?(w=!1,y=hf(h,!0)):y=[]:yt(h)||De(h)?(y=l,De(l)?y=os(l):(!V(l)||oe(l))&&(y=Lf(h))):w=!1}w&&(a.set(h,y),i(y,h,r,s,a),a.delete(h)),Xr(n,t,y)}function ju(n,e){var t=n.length;if(t)return e+=e<0?t:0,se(e,t)?n[e]:u}function nf(n,e,t){e.length?e=Q(e,function(s){return W(s)?function(a){return Re(a,s.length===1?s[0]:s)}:s}):e=[xn];var r=-1;e=Q(e,Cn(R()));var i=Qu(n,function(s,a,l){var h=Q(e,function(m){return m(s)});return{criteria:h,index:++r,value:s}});return Vo(i,function(s,a){return Bl(s,a,t)})}function Ol(n,e){return ef(n,e,function(t,r){return Ni(n,r)})}function ef(n,e,t){for(var r=-1,i=e.length,s={};++r<i;){var a=e[r],l=Re(n,a);t(l,a)&&dt(s,we(a,n),l)}return s}function Il(n){return function(e){return Re(e,n)}}function ii(n,e,t,r){var i=r?ko:Ue,s=-1,a=e.length,l=n;for(n===e&&(e=vn(e)),t&&(l=Q(n,Cn(t)));++s<a;)for(var h=0,m=e[s],y=t?t(m):m;(h=i(l,y,h,r))>-1;)l!==n&&$t.call(l,h,1),$t.call(n,h,1);return n}function tf(n,e){for(var t=n?e.length:0,r=t-1;t--;){var i=e[t];if(t==r||i!==s){var s=i;se(i)?$t.call(n,i,1):oi(n,i)}}return n}function ui(n,e){return n+Ht(Mu()*(e-n+1))}function Tl(n,e,t,r){for(var i=-1,s=un(Jt((e-n)/(t||1)),0),a=g(s);s--;)a[r?s:++i]=n,n+=t;return a}function fi(n,e){var t="";if(!n||e<1||e>pe)return t;do e%2&&(t+=n),e=Ht(e/2),e&&(n+=n);while(e);return t}function M(n,e){return Ai(Wf(n,e,xn),n+"")}function Rl(n){return Fu(Xe(n))}function Ll(n,e){var t=Xe(n);return fr(t,Te(e,0,t.length))}function dt(n,e,t,r){if(!V(n))return n;e=we(e,n);for(var i=-1,s=e.length,a=s-1,l=n;l!=null&&++i<s;){var h=Vn(e[i]),m=t;if(h==="__proto__"||h==="constructor"||h==="prototype")return n;if(i!=a){var y=l[h];m=r?r(y,h,l):u,m===u&&(m=V(y)?y:se(e[i+1])?[]:{})}ct(l,h,m),l=l[h]}return n}var rf=qt?function(n,e){return qt.set(n,e),n}:xn,Nl=Gt?function(n,e){return Gt(n,"toString",{configurable:!0,enumerable:!1,value:Wi(e),writable:!0})}:xn;function Dl(n){return fr(Xe(n))}function Un(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=g(i);++r<i;)s[r]=n[r+e];return s}function Wl(n,e){var t;return ve(n,function(r,i,s){return t=e(r,i,s),!t}),!!t}function kt(n,e,t){var r=0,i=n==null?r:n.length;if(typeof e=="number"&&e===e&&i<=bs){for(;r<i;){var s=r+i>>>1,a=n[s];a!==null&&!In(a)&&(t?a<=e:a<e)?r=s+1:i=s}return i}return si(n,e,xn,t)}function si(n,e,t,r){var i=0,s=n==null?0:n.length;if(s===0)return 0;e=t(e);for(var a=e!==e,l=e===null,h=In(e),m=e===u;i<s;){var y=Ht((i+s)/2),w=t(n[y]),A=w!==u,O=w===null,L=w===w,P=In(w);if(a)var N=r||L;else m?N=L&&(r||A):l?N=L&&A&&(r||!O):h?N=L&&A&&!O&&(r||!P):O||P?N=!1:N=r?w<=e:w<e;N?i=y+1:s=y}return hn(s,Ws)}function uf(n,e){for(var t=-1,r=n.length,i=0,s=[];++t<r;){var a=n[t],l=e?e(a):a;if(!t||!Yn(l,h)){var h=l;s[i++]=a===0?0:a}}return s}function ff(n){return typeof n=="number"?n:In(n)?St:+n}function On(n){if(typeof n=="string")return n;if(W(n))return Q(n,On)+"";if(In(n))return Uu?Uu.call(n):"";var e=n+"";return e=="0"&&1/n==-Ae?"-0":e}function ye(n,e,t){var r=-1,i=Lt,s=n.length,a=!0,l=[],h=l;if(t)a=!1,i=Mr;else if(s>=d){var m=e?null:ql(n);if(m)return Dt(m);a=!1,i=ut,h=new Ie}else h=e?[]:l;n:for(;++r<s;){var y=n[r],w=e?e(y):y;if(y=t||y!==0?y:0,a&&w===w){for(var A=h.length;A--;)if(h[A]===w)continue n;e&&h.push(w),l.push(y)}else i(h,w,t)||(h!==l&&h.push(w),l.push(y))}return l}function oi(n,e){return e=we(e,n),n=bf(n,e),n==null||delete n[Vn(Bn(e))]}function sf(n,e,t,r){return dt(n,e,t(Re(n,e)),r)}function Vt(n,e,t,r){for(var i=n.length,s=r?i:-1;(r?s--:++s<i)&&e(n[s],s,n););return t?Un(n,r?0:s,r?s+1:i):Un(n,r?s+1:0,r?i:s)}function of(n,e){var t=n;return t instanceof B&&(t=t.value()),Ur(e,function(r,i){return i.func.apply(i.thisArg,de([r],i.args))},t)}function ai(n,e,t){var r=n.length;if(r<2)return r?ye(n[0]):[];for(var i=-1,s=g(r);++i<r;)for(var a=n[i],l=-1;++l<r;)l!=i&&(s[i]=ht(s[i]||a,n[l],e,t));return ye(ln(s,1),e,t)}function af(n,e,t){for(var r=-1,i=n.length,s=e.length,a={};++r<i;){var l=r<s?e[r]:u;t(a,n[r],l)}return a}function li(n){return nn(n)?n:[]}function ci(n){return typeof n=="function"?n:xn}function we(n,e){return W(n)?n:wi(n,e)?[n]:Bf(K(n))}var bl=M;function xe(n,e,t){var r=n.length;return t=t===u?r:t,!e&&t>=r?n:Un(n,e,t)}var lf=xa||function(n){return an.clearTimeout(n)};function cf(n,e){if(e)return n.slice();var t=n.length,r=Nu?Nu(t):new n.constructor(t);return n.copy(r),r}function hi(n){var e=new n.constructor(n.byteLength);return new Bt(e).set(new Bt(n)),e}function Pl(n,e){var t=e?hi(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}function Ml(n){var e=new n.constructor(n.source,Yi.exec(n));return e.lastIndex=n.lastIndex,e}function Ul(n){return lt?Y(lt.call(n)):{}}function hf(n,e){var t=e?hi(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}function pf(n,e){if(n!==e){var t=n!==u,r=n===null,i=n===n,s=In(n),a=e!==u,l=e===null,h=e===e,m=In(e);if(!l&&!m&&!s&&n>e||s&&a&&h&&!l&&!m||r&&a&&h||!t&&h||!i)return 1;if(!r&&!s&&!m&&n<e||m&&t&&i&&!r&&!s||l&&t&&i||!a&&i||!h)return-1}return 0}function Bl(n,e,t){for(var r=-1,i=n.criteria,s=e.criteria,a=i.length,l=t.length;++r<a;){var h=pf(i[r],s[r]);if(h){if(r>=l)return h;var m=t[r];return h*(m=="desc"?-1:1)}}return n.index-e.index}function gf(n,e,t,r){for(var i=-1,s=n.length,a=t.length,l=-1,h=e.length,m=un(s-a,0),y=g(h+m),w=!r;++l<h;)y[l]=e[l];for(;++i<a;)(w||i<s)&&(y[t[i]]=n[i]);for(;m--;)y[l++]=n[i++];return y}function df(n,e,t,r){for(var i=-1,s=n.length,a=-1,l=t.length,h=-1,m=e.length,y=un(s-l,0),w=g(y+m),A=!r;++i<y;)w[i]=n[i];for(var O=i;++h<m;)w[O+h]=e[h];for(;++a<l;)(A||i<s)&&(w[O+t[a]]=n[i++]);return w}function vn(n,e){var t=-1,r=n.length;for(e||(e=g(r));++t<r;)e[t]=n[t];return e}function kn(n,e,t,r){var i=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var l=e[s],h=r?r(t[l],n[l],l,t,n):u;h===u&&(h=n[l]),i?ie(t,l,h):ct(t,l,h)}return t}function Fl(n,e){return kn(n,yi(n),e)}function $l(n,e){return kn(n,Tf(n),e)}function jt(n,e){return function(t,r){var i=W(t)?Ko:ol,s=e?e():{};return i(t,n,R(r,2),s)}}function Ke(n){return M(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:u,a=i>2?t[2]:u;for(s=n.length>3&&typeof s=="function"?(i--,s):u,a&&_n(t[0],t[1],a)&&(s=i<3?u:s,i=1),e=Y(e);++r<i;){var l=t[r];l&&n(e,l,r,s)}return e})}function _f(n,e){return function(t,r){if(t==null)return t;if(!yn(t))return n(t,r);for(var i=t.length,s=e?i:-1,a=Y(t);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return t}}function mf(n){return function(e,t,r){for(var i=-1,s=Y(e),a=r(e),l=a.length;l--;){var h=a[n?l:++i];if(t(s[h],h,s)===!1)break}return e}}function Gl(n,e,t){var r=e&T,i=_t(n);function s(){var a=this&&this!==an&&this instanceof s?i:n;return a.apply(r?t:this,arguments)}return s}function vf(n){return function(e){e=K(e);var t=Be(e)?Kn(e):u,r=t?t[0]:e.charAt(0),i=t?xe(t,1).join(""):e.slice(1);return r[n]()+i}}function ze(n){return function(e){return Ur(_s(ds(e).replace(No,"")),n,"")}}function _t(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=qe(n.prototype),r=n.apply(t,e);return V(r)?r:t}}function Jl(n,e,t){var r=_t(n);function i(){for(var s=arguments.length,a=g(s),l=s,h=Ye(i);l--;)a[l]=arguments[l];var m=s<3&&a[0]!==h&&a[s-1]!==h?[]:_e(a,h);if(s-=m.length,s<t)return Af(n,e,nr,i.placeholder,u,a,m,u,u,t-s);var y=this&&this!==an&&this instanceof i?r:n;return En(y,this,a)}return i}function yf(n){return function(e,t,r){var i=Y(e);if(!yn(e)){var s=R(t,3);e=fn(e),t=function(l){return s(i[l],l,i)}}var a=n(e,t,r);return a>-1?i[s?e[a]:a]:u}}function wf(n){return fe(function(e){var t=e.length,r=t,i=Pn.prototype.thru;for(n&&e.reverse();r--;){var s=e[r];if(typeof s!="function")throw new bn(C);if(i&&!a&&ir(s)=="wrapper")var a=new Pn([],!0)}for(r=a?r:t;++r<t;){s=e[r];var l=ir(s),h=l=="wrapper"?mi(s):u;h&&xi(h[0])&&h[1]==(Nn|tn|gn|Jn)&&!h[4].length&&h[9]==1?a=a[ir(h[0])].apply(a,h[3]):a=s.length==1&&xi(s)?a[l]():a.thru(s)}return function(){var m=arguments,y=m[0];if(a&&m.length==1&&W(y))return a.plant(y).value();for(var w=0,A=t?e[w].apply(this,m):y;++w<t;)A=e[w].call(this,A);return A}})}function nr(n,e,t,r,i,s,a,l,h,m){var y=e&Nn,w=e&T,A=e&G,O=e&(tn|on),L=e&ke,P=A?u:_t(n);function N(){for(var U=arguments.length,J=g(U),Tn=U;Tn--;)J[Tn]=arguments[Tn];if(O)var mn=Ye(N),Rn=na(J,mn);if(r&&(J=gf(J,r,i,O)),s&&(J=df(J,s,a,O)),U-=Rn,O&&U<m){var en=_e(J,mn);return Af(n,e,nr,N.placeholder,t,J,en,l,h,m-U)}var Zn=w?t:this,le=A?Zn[n]:n;return U=J.length,l?J=oc(J,l):L&&U>1&&J.reverse(),y&&h<U&&(J.length=h),this&&this!==an&&this instanceof N&&(le=P||_t(le)),le.apply(Zn,J)}return N}function xf(n,e){return function(t,r){return _l(t,n,e(r),{})}}function er(n,e){return function(t,r){var i;if(t===u&&r===u)return e;if(t!==u&&(i=t),r!==u){if(i===u)return r;typeof t=="string"||typeof r=="string"?(t=On(t),r=On(r)):(t=ff(t),r=ff(r)),i=n(t,r)}return i}}function pi(n){return fe(function(e){return e=Q(e,Cn(R())),M(function(t){var r=this;return n(e,function(i){return En(i,r,t)})})})}function tr(n,e){e=e===u?" ":On(e);var t=e.length;if(t<2)return t?fi(e,n):e;var r=fi(e,Jt(n/Fe(e)));return Be(e)?xe(Kn(r),0,n).join(""):r.slice(0,n)}function Hl(n,e,t,r){var i=e&T,s=_t(n);function a(){for(var l=-1,h=arguments.length,m=-1,y=r.length,w=g(y+h),A=this&&this!==an&&this instanceof a?s:n;++m<y;)w[m]=r[m];for(;h--;)w[m++]=arguments[++l];return En(A,i?t:this,w)}return a}function Sf(n){return function(e,t,r){return r&&typeof r!="number"&&_n(e,t,r)&&(t=r=u),e=ae(e),t===u?(t=e,e=0):t=ae(t),r=r===u?e<t?1:-1:ae(r),Tl(e,t,r,n)}}function rr(n){return function(e,t){return typeof e=="string"&&typeof t=="string"||(e=Fn(e),t=Fn(t)),n(e,t)}}function Af(n,e,t,r,i,s,a,l,h,m){var y=e&tn,w=y?a:u,A=y?u:a,O=y?s:u,L=y?u:s;e|=y?gn:he,e&=~(y?he:gn),e&H||(e&=~(T|G));var P=[n,e,i,O,w,L,A,l,h,m],N=t.apply(u,P);return xi(n)&&Pf(N,P),N.placeholder=r,Mf(N,n,e)}function gi(n){var e=rn[n];return function(t,r){if(t=Fn(t),r=r==null?0:hn(b(r),292),r&&Pu(t)){var i=(K(t)+"e").split("e"),s=e(i[0]+"e"+(+i[1]+r));return i=(K(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return e(t)}}var ql=Je&&1/Dt(new Je([,-0]))[1]==Ae?function(n){return new Je(n)}:Mi;function Ef(n){return function(e){var t=pn(e);return t==Hn?qr(e):t==qn?sa(e):jo(e,n(e))}}function ue(n,e,t,r,i,s,a,l){var h=e&G;if(!h&&typeof n!="function")throw new bn(C);var m=r?r.length:0;if(m||(e&=~(gn|he),r=i=u),a=a===u?a:un(b(a),0),l=l===u?l:b(l),m-=i?i.length:0,e&he){var y=r,w=i;r=i=u}var A=h?u:mi(n),O=[n,e,t,r,i,y,w,s,a,l];if(A&&uc(O,A),n=O[0],e=O[1],t=O[2],r=O[3],i=O[4],l=O[9]=O[9]===u?h?0:n.length:un(O[9]-m,0),!l&&e&(tn|on)&&(e&=~(tn|on)),!e||e==T)var L=Gl(n,e,t);else e==tn||e==on?L=Jl(n,e,l):(e==gn||e==(T|gn))&&!i.length?L=Hl(n,e,t,r):L=nr.apply(u,O);var P=A?rf:Pf;return Mf(P(L,O),n,e)}function Cf(n,e,t,r){return n===u||Yn(n,Ge[t])&&!z.call(r,t)?e:n}function Of(n,e,t,r,i,s){return V(n)&&V(e)&&(s.set(e,n),Qt(n,e,u,Of,s),s.delete(e)),n}function Kl(n){return yt(n)?u:n}function If(n,e,t,r,i,s){var a=t&An,l=n.length,h=e.length;if(l!=h&&!(a&&h>l))return!1;var m=s.get(n),y=s.get(e);if(m&&y)return m==e&&y==n;var w=-1,A=!0,O=t&Gn?new Ie:u;for(s.set(n,e),s.set(e,n);++w<l;){var L=n[w],P=e[w];if(r)var N=a?r(P,L,w,e,n,s):r(L,P,w,n,e,s);if(N!==u){if(N)continue;A=!1;break}if(O){if(!Br(e,function(U,J){if(!ut(O,J)&&(L===U||i(L,U,t,r,s)))return O.push(J)})){A=!1;break}}else if(!(L===P||i(L,P,t,r,s))){A=!1;break}}return s.delete(n),s.delete(e),A}function zl(n,e,t,r,i,s,a){switch(t){case Pe:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case it:return!(n.byteLength!=e.byteLength||!s(new Bt(n),new Bt(e)));case Ve:case je:case nt:return Yn(+n,+e);case Et:return n.name==e.name&&n.message==e.message;case et:case tt:return n==e+"";case Hn:var l=qr;case qn:var h=r&An;if(l||(l=Dt),n.size!=e.size&&!h)return!1;var m=a.get(n);if(m)return m==e;r|=Gn,a.set(n,e);var y=If(l(n),l(e),r,i,s,a);return a.delete(n),y;case Ot:if(lt)return lt.call(n)==lt.call(e)}return!1}function Yl(n,e,t,r,i,s){var a=t&An,l=di(n),h=l.length,m=di(e),y=m.length;if(h!=y&&!a)return!1;for(var w=h;w--;){var A=l[w];if(!(a?A in e:z.call(e,A)))return!1}var O=s.get(n),L=s.get(e);if(O&&L)return O==e&&L==n;var P=!0;s.set(n,e),s.set(e,n);for(var N=a;++w<h;){A=l[w];var U=n[A],J=e[A];if(r)var Tn=a?r(J,U,A,e,n,s):r(U,J,A,n,e,s);if(!(Tn===u?U===J||i(U,J,t,r,s):Tn)){P=!1;break}N||(N=A=="constructor")}if(P&&!N){var mn=n.constructor,Rn=e.constructor;mn!=Rn&&"constructor"in n&&"constructor"in e&&!(typeof mn=="function"&&mn instanceof mn&&typeof Rn=="function"&&Rn instanceof Rn)&&(P=!1)}return s.delete(n),s.delete(e),P}function fe(n){return Ai(Wf(n,u,Jf),n+"")}function di(n){return zu(n,fn,yi)}function _i(n){return zu(n,wn,Tf)}var mi=qt?function(n){return qt.get(n)}:Mi;function ir(n){for(var e=n.name+"",t=He[e],r=z.call(He,e)?t.length:0;r--;){var i=t[r],s=i.func;if(s==null||s==n)return i.name}return e}function Ye(n){var e=z.call(f,"placeholder")?f:n;return e.placeholder}function R(){var n=f.iteratee||bi;return n=n===bi?Xu:n,arguments.length?n(arguments[0],arguments[1]):n}function ur(n,e){var t=n.__data__;return ec(e)?t[typeof e=="string"?"string":"hash"]:t.map}function vi(n){for(var e=fn(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,Nf(i)]}return e}function Le(n,e){var t=ia(n,e);return Zu(t)?t:u}function Zl(n){var e=z.call(n,Ce),t=n[Ce];try{n[Ce]=u;var r=!0}catch{}var i=Mt.call(n);return r&&(e?n[Ce]=t:delete n[Ce]),i}var yi=zr?function(n){return n==null?[]:(n=Y(n),ge(zr(n),function(e){return Wu.call(n,e)}))}:Ui,Tf=zr?function(n){for(var e=[];n;)de(e,yi(n)),n=Ft(n);return e}:Ui,pn=dn;(Yr&&pn(new Yr(new ArrayBuffer(1)))!=Pe||st&&pn(new st)!=Hn||Zr&&pn(Zr.resolve())!=Hi||Je&&pn(new Je)!=qn||ot&&pn(new ot)!=rt)&&(pn=function(n){var e=dn(n),t=e==ee?n.constructor:u,r=t?Ne(t):"";if(r)switch(r){case La:return Pe;case Na:return Hn;case Da:return Hi;case Wa:return qn;case ba:return rt}return e});function Xl(n,e,t){for(var r=-1,i=t.length;++r<i;){var s=t[r],a=s.size;switch(s.type){case"drop":n+=a;break;case"dropRight":e-=a;break;case"take":e=hn(e,n+a);break;case"takeRight":n=un(n,e-a);break}}return{start:n,end:e}}function Ql(n){var e=n.match(eo);return e?e[1].split(to):[]}function Rf(n,e,t){e=we(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var a=Vn(e[r]);if(!(s=n!=null&&t(n,a)))break;n=n[a]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&hr(i)&&se(a,i)&&(W(n)||De(n)))}function kl(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&z.call(n,"index")&&(t.index=n.index,t.input=n.input),t}function Lf(n){return typeof n.constructor=="function"&&!mt(n)?qe(Ft(n)):{}}function Vl(n,e,t){var r=n.constructor;switch(e){case it:return hi(n);case Ve:case je:return new r(+n);case Pe:return Pl(n,t);case vr:case yr:case wr:case xr:case Sr:case Ar:case Er:case Cr:case Or:return hf(n,t);case Hn:return new r;case nt:case tt:return new r(n);case et:return Ml(n);case qn:return new r;case Ot:return Ul(n)}}function jl(n,e){var t=e.length;if(!t)return n;var r=t-1;return e[r]=(t>1?"& ":"")+e[r],e=e.join(t>2?", ":" "),n.replace(no,`{
/* [wrapped with `+e+`] */
`)}function nc(n){return W(n)||De(n)||!!(bu&&n&&n[bu])}function se(n,e){var t=typeof n;return e=e??pe,!!e&&(t=="number"||t!="symbol"&&co.test(n))&&n>-1&&n%1==0&&n<e}function _n(n,e,t){if(!V(t))return!1;var r=typeof e;return(r=="number"?yn(t)&&se(e,t.length):r=="string"&&e in t)?Yn(t[e],n):!1}function wi(n,e){if(W(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||In(n)?!0:Qs.test(n)||!Xs.test(n)||e!=null&&n in Y(e)}function ec(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function xi(n){var e=ir(n),t=f[e];if(typeof t!="function"||!(e in B.prototype))return!1;if(n===t)return!0;var r=mi(t);return!!r&&n===r[0]}function tc(n){return!!Lu&&Lu in n}var rc=bt?oe:Bi;function mt(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Ge;return n===t}function Nf(n){return n===n&&!V(n)}function Df(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==u||n in Y(t))}}function ic(n){var e=lr(n,function(r){return t.size===S&&t.clear(),r}),t=e.cache;return e}function uc(n,e){var t=n[1],r=e[1],i=t|r,s=i<(T|G|Nn),a=r==Nn&&t==tn||r==Nn&&t==Jn&&n[7].length<=e[8]||r==(Nn|Jn)&&e[7].length<=e[8]&&t==tn;if(!(s||a))return n;r&T&&(n[2]=e[2],i|=t&T?0:H);var l=e[3];if(l){var h=n[3];n[3]=h?gf(h,l,e[4]):l,n[4]=h?_e(n[3],cn):e[4]}return l=e[5],l&&(h=n[5],n[5]=h?df(h,l,e[6]):l,n[6]=h?_e(n[5],cn):e[6]),l=e[7],l&&(n[7]=l),r&Nn&&(n[8]=n[8]==null?e[8]:hn(n[8],e[8])),n[9]==null&&(n[9]=e[9]),n[0]=e[0],n[1]=i,n}function fc(n){var e=[];if(n!=null)for(var t in Y(n))e.push(t);return e}function sc(n){return Mt.call(n)}function Wf(n,e,t){return e=un(e===u?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=un(r.length-e,0),a=g(s);++i<s;)a[i]=r[e+i];i=-1;for(var l=g(e+1);++i<e;)l[i]=r[i];return l[e]=t(a),En(n,this,l)}}function bf(n,e){return e.length<2?n:Re(n,Un(e,0,-1))}function oc(n,e){for(var t=n.length,r=hn(e.length,t),i=vn(n);r--;){var s=e[r];n[r]=se(s,t)?i[s]:u}return n}function Si(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var Pf=Uf(rf),vt=Aa||function(n,e){return an.setTimeout(n,e)},Ai=Uf(Nl);function Mf(n,e,t){var r=e+"";return Ai(n,jl(r,ac(Ql(r),t)))}function Uf(n){var e=0,t=0;return function(){var r=Ia(),i=Rs-(r-t);if(t=r,i>0){if(++e>=Ts)return arguments[0]}else e=0;return n.apply(u,arguments)}}function fr(n,e){var t=-1,r=n.length,i=r-1;for(e=e===u?r:e;++t<e;){var s=ui(t,i),a=n[s];n[s]=n[t],n[t]=a}return n.length=e,n}var Bf=ic(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(ks,function(t,r,i,s){e.push(i?s.replace(uo,"$1"):r||t)}),e});function Vn(n){if(typeof n=="string"||In(n))return n;var e=n+"";return e=="0"&&1/n==-Ae?"-0":e}function Ne(n){if(n!=null){try{return Pt.call(n)}catch{}try{return n+""}catch{}}return""}function ac(n,e){return Wn(Ps,function(t){var r="_."+t[0];e&t[1]&&!Lt(n,r)&&n.push(r)}),n.sort()}function Ff(n){if(n instanceof B)return n.clone();var e=new Pn(n.__wrapped__,n.__chain__);return e.__actions__=vn(n.__actions__),e.__index__=n.__index__,e.__values__=n.__values__,e}function lc(n,e,t){(t?_n(n,e,t):e===u)?e=1:e=un(b(e),0);var r=n==null?0:n.length;if(!r||e<1)return[];for(var i=0,s=0,a=g(Jt(r/e));i<r;)a[s++]=Un(n,i,i+=e);return a}function cc(n){for(var e=-1,t=n==null?0:n.length,r=0,i=[];++e<t;){var s=n[e];s&&(i[r++]=s)}return i}function hc(){var n=arguments.length;if(!n)return[];for(var e=g(n-1),t=arguments[0],r=n;r--;)e[r-1]=arguments[r];return de(W(t)?vn(t):[t],ln(e,1))}var pc=M(function(n,e){return nn(n)?ht(n,ln(e,1,nn,!0)):[]}),gc=M(function(n,e){var t=Bn(e);return nn(t)&&(t=u),nn(n)?ht(n,ln(e,1,nn,!0),R(t,2)):[]}),dc=M(function(n,e){var t=Bn(e);return nn(t)&&(t=u),nn(n)?ht(n,ln(e,1,nn,!0),u,t):[]});function _c(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===u?1:b(e),Un(n,e<0?0:e,r)):[]}function mc(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===u?1:b(e),e=r-e,Un(n,0,e<0?0:e)):[]}function vc(n,e){return n&&n.length?Vt(n,R(e,3),!0,!0):[]}function yc(n,e){return n&&n.length?Vt(n,R(e,3),!0):[]}function wc(n,e,t,r){var i=n==null?0:n.length;return i?(t&&typeof t!="number"&&_n(n,e,t)&&(t=0,r=i),hl(n,e,t,r)):[]}function $f(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=t==null?0:b(t);return i<0&&(i=un(r+i,0)),Nt(n,R(e,3),i)}function Gf(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=r-1;return t!==u&&(i=b(t),i=t<0?un(r+i,0):hn(i,r-1)),Nt(n,R(e,3),i,!0)}function Jf(n){var e=n==null?0:n.length;return e?ln(n,1):[]}function xc(n){var e=n==null?0:n.length;return e?ln(n,Ae):[]}function Sc(n,e){var t=n==null?0:n.length;return t?(e=e===u?1:b(e),ln(n,e)):[]}function Ac(n){for(var e=-1,t=n==null?0:n.length,r={};++e<t;){var i=n[e];r[i[0]]=i[1]}return r}function Hf(n){return n&&n.length?n[0]:u}function Ec(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=t==null?0:b(t);return i<0&&(i=un(r+i,0)),Ue(n,e,i)}function Cc(n){var e=n==null?0:n.length;return e?Un(n,0,-1):[]}var Oc=M(function(n){var e=Q(n,li);return e.length&&e[0]===n[0]?ni(e):[]}),Ic=M(function(n){var e=Bn(n),t=Q(n,li);return e===Bn(t)?e=u:t.pop(),t.length&&t[0]===n[0]?ni(t,R(e,2)):[]}),Tc=M(function(n){var e=Bn(n),t=Q(n,li);return e=typeof e=="function"?e:u,e&&t.pop(),t.length&&t[0]===n[0]?ni(t,u,e):[]});function Rc(n,e){return n==null?"":Ca.call(n,e)}function Bn(n){var e=n==null?0:n.length;return e?n[e-1]:u}function Lc(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=r;return t!==u&&(i=b(t),i=i<0?un(r+i,0):hn(i,r-1)),e===e?aa(n,e,i):Nt(n,Su,i,!0)}function Nc(n,e){return n&&n.length?ju(n,b(e)):u}var Dc=M(qf);function qf(n,e){return n&&n.length&&e&&e.length?ii(n,e):n}function Wc(n,e,t){return n&&n.length&&e&&e.length?ii(n,e,R(t,2)):n}function bc(n,e,t){return n&&n.length&&e&&e.length?ii(n,e,u,t):n}var Pc=fe(function(n,e){var t=n==null?0:n.length,r=Qr(n,e);return tf(n,Q(e,function(i){return se(i,t)?+i:i}).sort(pf)),r});function Mc(n,e){var t=[];if(!(n&&n.length))return t;var r=-1,i=[],s=n.length;for(e=R(e,3);++r<s;){var a=n[r];e(a,r,n)&&(t.push(a),i.push(r))}return tf(n,i),t}function Ei(n){return n==null?n:Ra.call(n)}function Uc(n,e,t){var r=n==null?0:n.length;return r?(t&&typeof t!="number"&&_n(n,e,t)?(e=0,t=r):(e=e==null?0:b(e),t=t===u?r:b(t)),Un(n,e,t)):[]}function Bc(n,e){return kt(n,e)}function Fc(n,e,t){return si(n,e,R(t,2))}function $c(n,e){var t=n==null?0:n.length;if(t){var r=kt(n,e);if(r<t&&Yn(n[r],e))return r}return-1}function Gc(n,e){return kt(n,e,!0)}function Jc(n,e,t){return si(n,e,R(t,2),!0)}function Hc(n,e){var t=n==null?0:n.length;if(t){var r=kt(n,e,!0)-1;if(Yn(n[r],e))return r}return-1}function qc(n){return n&&n.length?uf(n):[]}function Kc(n,e){return n&&n.length?uf(n,R(e,2)):[]}function zc(n){var e=n==null?0:n.length;return e?Un(n,1,e):[]}function Yc(n,e,t){return n&&n.length?(e=t||e===u?1:b(e),Un(n,0,e<0?0:e)):[]}function Zc(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===u?1:b(e),e=r-e,Un(n,e<0?0:e,r)):[]}function Xc(n,e){return n&&n.length?Vt(n,R(e,3),!1,!0):[]}function Qc(n,e){return n&&n.length?Vt(n,R(e,3)):[]}var kc=M(function(n){return ye(ln(n,1,nn,!0))}),Vc=M(function(n){var e=Bn(n);return nn(e)&&(e=u),ye(ln(n,1,nn,!0),R(e,2))}),jc=M(function(n){var e=Bn(n);return e=typeof e=="function"?e:u,ye(ln(n,1,nn,!0),u,e)});function nh(n){return n&&n.length?ye(n):[]}function eh(n,e){return n&&n.length?ye(n,R(e,2)):[]}function th(n,e){return e=typeof e=="function"?e:u,n&&n.length?ye(n,u,e):[]}function Ci(n){if(!(n&&n.length))return[];var e=0;return n=ge(n,function(t){if(nn(t))return e=un(t.length,e),!0}),Jr(e,function(t){return Q(n,Fr(t))})}function Kf(n,e){if(!(n&&n.length))return[];var t=Ci(n);return e==null?t:Q(t,function(r){return En(e,u,r)})}var rh=M(function(n,e){return nn(n)?ht(n,e):[]}),ih=M(function(n){return ai(ge(n,nn))}),uh=M(function(n){var e=Bn(n);return nn(e)&&(e=u),ai(ge(n,nn),R(e,2))}),fh=M(function(n){var e=Bn(n);return e=typeof e=="function"?e:u,ai(ge(n,nn),u,e)}),sh=M(Ci);function oh(n,e){return af(n||[],e||[],ct)}function ah(n,e){return af(n||[],e||[],dt)}var lh=M(function(n){var e=n.length,t=e>1?n[e-1]:u;return t=typeof t=="function"?(n.pop(),t):u,Kf(n,t)});function zf(n){var e=f(n);return e.__chain__=!0,e}function ch(n,e){return e(n),n}function sr(n,e){return e(n)}var hh=fe(function(n){var e=n.length,t=e?n[0]:0,r=this.__wrapped__,i=function(s){return Qr(s,n)};return e>1||this.__actions__.length||!(r instanceof B)||!se(t)?this.thru(i):(r=r.slice(t,+t+(e?1:0)),r.__actions__.push({func:sr,args:[i],thisArg:u}),new Pn(r,this.__chain__).thru(function(s){return e&&!s.length&&s.push(u),s}))});function ph(){return zf(this)}function gh(){return new Pn(this.value(),this.__chain__)}function dh(){this.__values__===u&&(this.__values__=fs(this.value()));var n=this.__index__>=this.__values__.length,e=n?u:this.__values__[this.__index__++];return{done:n,value:e}}function _h(){return this}function mh(n){for(var e,t=this;t instanceof zt;){var r=Ff(t);r.__index__=0,r.__values__=u,e?i.__wrapped__=r:e=r;var i=r;t=t.__wrapped__}return i.__wrapped__=n,e}function vh(){var n=this.__wrapped__;if(n instanceof B){var e=n;return this.__actions__.length&&(e=new B(this)),e=e.reverse(),e.__actions__.push({func:sr,args:[Ei],thisArg:u}),new Pn(e,this.__chain__)}return this.thru(Ei)}function yh(){return of(this.__wrapped__,this.__actions__)}var wh=jt(function(n,e,t){z.call(n,t)?++n[t]:ie(n,t,1)});function xh(n,e,t){var r=W(n)?wu:cl;return t&&_n(n,e,t)&&(e=u),r(n,R(e,3))}function Sh(n,e){var t=W(n)?ge:qu;return t(n,R(e,3))}var Ah=yf($f),Eh=yf(Gf);function Ch(n,e){return ln(or(n,e),1)}function Oh(n,e){return ln(or(n,e),Ae)}function Ih(n,e,t){return t=t===u?1:b(t),ln(or(n,e),t)}function Yf(n,e){var t=W(n)?Wn:ve;return t(n,R(e,3))}function Zf(n,e){var t=W(n)?zo:Hu;return t(n,R(e,3))}var Th=jt(function(n,e,t){z.call(n,t)?n[t].push(e):ie(n,t,[e])});function Rh(n,e,t,r){n=yn(n)?n:Xe(n),t=t&&!r?b(t):0;var i=n.length;return t<0&&(t=un(i+t,0)),pr(n)?t<=i&&n.indexOf(e,t)>-1:!!i&&Ue(n,e,t)>-1}var Lh=M(function(n,e,t){var r=-1,i=typeof e=="function",s=yn(n)?g(n.length):[];return ve(n,function(a){s[++r]=i?En(e,a,t):pt(a,e,t)}),s}),Nh=jt(function(n,e,t){ie(n,t,e)});function or(n,e){var t=W(n)?Q:Qu;return t(n,R(e,3))}function Dh(n,e,t,r){return n==null?[]:(W(e)||(e=e==null?[]:[e]),t=r?u:t,W(t)||(t=t==null?[]:[t]),nf(n,e,t))}var Wh=jt(function(n,e,t){n[t?0:1].push(e)},function(){return[[],[]]});function bh(n,e,t){var r=W(n)?Ur:Eu,i=arguments.length<3;return r(n,R(e,4),t,i,ve)}function Ph(n,e,t){var r=W(n)?Yo:Eu,i=arguments.length<3;return r(n,R(e,4),t,i,Hu)}function Mh(n,e){var t=W(n)?ge:qu;return t(n,cr(R(e,3)))}function Uh(n){var e=W(n)?Fu:Rl;return e(n)}function Bh(n,e,t){(t?_n(n,e,t):e===u)?e=1:e=b(e);var r=W(n)?fl:Ll;return r(n,e)}function Fh(n){var e=W(n)?sl:Dl;return e(n)}function $h(n){if(n==null)return 0;if(yn(n))return pr(n)?Fe(n):n.length;var e=pn(n);return e==Hn||e==qn?n.size:ti(n).length}function Gh(n,e,t){var r=W(n)?Br:Wl;return t&&_n(n,e,t)&&(e=u),r(n,R(e,3))}var Jh=M(function(n,e){if(n==null)return[];var t=e.length;return t>1&&_n(n,e[0],e[1])?e=[]:t>2&&_n(e[0],e[1],e[2])&&(e=[e[0]]),nf(n,ln(e,1),[])}),ar=Sa||function(){return an.Date.now()};function Hh(n,e){if(typeof e!="function")throw new bn(C);return n=b(n),function(){if(--n<1)return e.apply(this,arguments)}}function Xf(n,e,t){return e=t?u:e,e=n&&e==null?n.length:e,ue(n,Nn,u,u,u,u,e)}function Qf(n,e){var t;if(typeof e!="function")throw new bn(C);return n=b(n),function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=u),t}}var Oi=M(function(n,e,t){var r=T;if(t.length){var i=_e(t,Ye(Oi));r|=gn}return ue(n,r,e,t,i)}),kf=M(function(n,e,t){var r=T|G;if(t.length){var i=_e(t,Ye(kf));r|=gn}return ue(e,r,n,t,i)});function Vf(n,e,t){e=t?u:e;var r=ue(n,tn,u,u,u,u,u,e);return r.placeholder=Vf.placeholder,r}function jf(n,e,t){e=t?u:e;var r=ue(n,on,u,u,u,u,u,e);return r.placeholder=jf.placeholder,r}function ns(n,e,t){var r,i,s,a,l,h,m=0,y=!1,w=!1,A=!0;if(typeof n!="function")throw new bn(C);e=Fn(e)||0,V(t)&&(y=!!t.leading,w="maxWait"in t,s=w?un(Fn(t.maxWait)||0,e):s,A="trailing"in t?!!t.trailing:A);function O(en){var Zn=r,le=i;return r=i=u,m=en,a=n.apply(le,Zn),a}function L(en){return m=en,l=vt(U,e),y?O(en):a}function P(en){var Zn=en-h,le=en-m,ys=e-Zn;return w?hn(ys,s-le):ys}function N(en){var Zn=en-h,le=en-m;return h===u||Zn>=e||Zn<0||w&&le>=s}function U(){var en=ar();if(N(en))return J(en);l=vt(U,P(en))}function J(en){return l=u,A&&r?O(en):(r=i=u,a)}function Tn(){l!==u&&lf(l),m=0,r=h=i=l=u}function mn(){return l===u?a:J(ar())}function Rn(){var en=ar(),Zn=N(en);if(r=arguments,i=this,h=en,Zn){if(l===u)return L(h);if(w)return lf(l),l=vt(U,e),O(h)}return l===u&&(l=vt(U,e)),a}return Rn.cancel=Tn,Rn.flush=mn,Rn}var qh=M(function(n,e){return Ju(n,1,e)}),Kh=M(function(n,e,t){return Ju(n,Fn(e)||0,t)});function zh(n){return ue(n,ke)}function lr(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new bn(C);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var a=n.apply(this,r);return t.cache=s.set(i,a)||s,a};return t.cache=new(lr.Cache||re),t}lr.Cache=re;function cr(n){if(typeof n!="function")throw new bn(C);return function(){var e=arguments;switch(e.length){case 0:return!n.call(this);case 1:return!n.call(this,e[0]);case 2:return!n.call(this,e[0],e[1]);case 3:return!n.call(this,e[0],e[1],e[2])}return!n.apply(this,e)}}function Yh(n){return Qf(2,n)}var Zh=bl(function(n,e){e=e.length==1&&W(e[0])?Q(e[0],Cn(R())):Q(ln(e,1),Cn(R()));var t=e.length;return M(function(r){for(var i=-1,s=hn(r.length,t);++i<s;)r[i]=e[i].call(this,r[i]);return En(n,this,r)})}),Ii=M(function(n,e){var t=_e(e,Ye(Ii));return ue(n,gn,u,e,t)}),es=M(function(n,e){var t=_e(e,Ye(es));return ue(n,he,u,e,t)}),Xh=fe(function(n,e){return ue(n,Jn,u,u,u,e)});function Qh(n,e){if(typeof n!="function")throw new bn(C);return e=e===u?e:b(e),M(n,e)}function kh(n,e){if(typeof n!="function")throw new bn(C);return e=e==null?0:un(b(e),0),M(function(t){var r=t[e],i=xe(t,0,e);return r&&de(i,r),En(n,this,i)})}function Vh(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new bn(C);return V(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),ns(n,e,{leading:r,maxWait:e,trailing:i})}function jh(n){return Xf(n,1)}function np(n,e){return Ii(ci(e),n)}function ep(){if(!arguments.length)return[];var n=arguments[0];return W(n)?n:[n]}function tp(n){return Mn(n,Sn)}function rp(n,e){return e=typeof e=="function"?e:u,Mn(n,Sn,e)}function ip(n){return Mn(n,Ln|Sn)}function up(n,e){return e=typeof e=="function"?e:u,Mn(n,Ln|Sn,e)}function fp(n,e){return e==null||Gu(n,e,fn(e))}function Yn(n,e){return n===e||n!==n&&e!==e}var sp=rr(jr),op=rr(function(n,e){return n>=e}),De=Yu(function(){return arguments}())?Yu:function(n){return j(n)&&z.call(n,"callee")&&!Wu.call(n,"callee")},W=g.isArray,ap=gu?Cn(gu):ml;function yn(n){return n!=null&&hr(n.length)&&!oe(n)}function nn(n){return j(n)&&yn(n)}function lp(n){return n===!0||n===!1||j(n)&&dn(n)==Ve}var Se=Ea||Bi,cp=du?Cn(du):vl;function hp(n){return j(n)&&n.nodeType===1&&!yt(n)}function pp(n){if(n==null)return!0;if(yn(n)&&(W(n)||typeof n=="string"||typeof n.splice=="function"||Se(n)||Ze(n)||De(n)))return!n.length;var e=pn(n);if(e==Hn||e==qn)return!n.size;if(mt(n))return!ti(n).length;for(var t in n)if(z.call(n,t))return!1;return!0}function gp(n,e){return gt(n,e)}function dp(n,e,t){t=typeof t=="function"?t:u;var r=t?t(n,e):u;return r===u?gt(n,e,u,t):!!r}function Ti(n){if(!j(n))return!1;var e=dn(n);return e==Et||e==Us||typeof n.message=="string"&&typeof n.name=="string"&&!yt(n)}function _p(n){return typeof n=="number"&&Pu(n)}function oe(n){if(!V(n))return!1;var e=dn(n);return e==Ct||e==Ji||e==Ms||e==Fs}function ts(n){return typeof n=="number"&&n==b(n)}function hr(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=pe}function V(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}function j(n){return n!=null&&typeof n=="object"}var rs=_u?Cn(_u):wl;function mp(n,e){return n===e||ei(n,e,vi(e))}function vp(n,e,t){return t=typeof t=="function"?t:u,ei(n,e,vi(e),t)}function yp(n){return is(n)&&n!=+n}function wp(n){if(rc(n))throw new D(x);return Zu(n)}function xp(n){return n===null}function Sp(n){return n==null}function is(n){return typeof n=="number"||j(n)&&dn(n)==nt}function yt(n){if(!j(n)||dn(n)!=ee)return!1;var e=Ft(n);if(e===null)return!0;var t=z.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Pt.call(t)==va}var Ri=mu?Cn(mu):xl;function Ap(n){return ts(n)&&n>=-pe&&n<=pe}var us=vu?Cn(vu):Sl;function pr(n){return typeof n=="string"||!W(n)&&j(n)&&dn(n)==tt}function In(n){return typeof n=="symbol"||j(n)&&dn(n)==Ot}var Ze=yu?Cn(yu):Al;function Ep(n){return n===u}function Cp(n){return j(n)&&pn(n)==rt}function Op(n){return j(n)&&dn(n)==Gs}var Ip=rr(ri),Tp=rr(function(n,e){return n<=e});function fs(n){if(!n)return[];if(yn(n))return pr(n)?Kn(n):vn(n);if(ft&&n[ft])return fa(n[ft]());var e=pn(n),t=e==Hn?qr:e==qn?Dt:Xe;return t(n)}function ae(n){if(!n)return n===0?n:0;if(n=Fn(n),n===Ae||n===-Ae){var e=n<0?-1:1;return e*Ds}return n===n?n:0}function b(n){var e=ae(n),t=e%1;return e===e?t?e-t:e:0}function ss(n){return n?Te(b(n),0,Xn):0}function Fn(n){if(typeof n=="number")return n;if(In(n))return St;if(V(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=V(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Cu(n);var t=oo.test(n);return t||lo.test(n)?Ho(n.slice(2),t?2:8):so.test(n)?St:+n}function os(n){return kn(n,wn(n))}function Rp(n){return n?Te(b(n),-pe,pe):n===0?n:0}function K(n){return n==null?"":On(n)}var Lp=Ke(function(n,e){if(mt(e)||yn(e)){kn(e,fn(e),n);return}for(var t in e)z.call(e,t)&&ct(n,t,e[t])}),as=Ke(function(n,e){kn(e,wn(e),n)}),gr=Ke(function(n,e,t,r){kn(e,wn(e),n,r)}),Np=Ke(function(n,e,t,r){kn(e,fn(e),n,r)}),Dp=fe(Qr);function Wp(n,e){var t=qe(n);return e==null?t:$u(t,e)}var bp=M(function(n,e){n=Y(n);var t=-1,r=e.length,i=r>2?e[2]:u;for(i&&_n(e[0],e[1],i)&&(r=1);++t<r;)for(var s=e[t],a=wn(s),l=-1,h=a.length;++l<h;){var m=a[l],y=n[m];(y===u||Yn(y,Ge[m])&&!z.call(n,m))&&(n[m]=s[m])}return n}),Pp=M(function(n){return n.push(u,Of),En(ls,u,n)});function Mp(n,e){return xu(n,R(e,3),Qn)}function Up(n,e){return xu(n,R(e,3),Vr)}function Bp(n,e){return n==null?n:kr(n,R(e,3),wn)}function Fp(n,e){return n==null?n:Ku(n,R(e,3),wn)}function $p(n,e){return n&&Qn(n,R(e,3))}function Gp(n,e){return n&&Vr(n,R(e,3))}function Jp(n){return n==null?[]:Xt(n,fn(n))}function Hp(n){return n==null?[]:Xt(n,wn(n))}function Li(n,e,t){var r=n==null?u:Re(n,e);return r===u?t:r}function qp(n,e){return n!=null&&Rf(n,e,pl)}function Ni(n,e){return n!=null&&Rf(n,e,gl)}var Kp=xf(function(n,e,t){e!=null&&typeof e.toString!="function"&&(e=Mt.call(e)),n[e]=t},Wi(xn)),zp=xf(function(n,e,t){e!=null&&typeof e.toString!="function"&&(e=Mt.call(e)),z.call(n,e)?n[e].push(t):n[e]=[t]},R),Yp=M(pt);function fn(n){return yn(n)?Bu(n):ti(n)}function wn(n){return yn(n)?Bu(n,!0):El(n)}function Zp(n,e){var t={};return e=R(e,3),Qn(n,function(r,i,s){ie(t,e(r,i,s),r)}),t}function Xp(n,e){var t={};return e=R(e,3),Qn(n,function(r,i,s){ie(t,i,e(r,i,s))}),t}var Qp=Ke(function(n,e,t){Qt(n,e,t)}),ls=Ke(function(n,e,t,r){Qt(n,e,t,r)}),kp=fe(function(n,e){var t={};if(n==null)return t;var r=!1;e=Q(e,function(s){return s=we(s,n),r||(r=s.length>1),s}),kn(n,_i(n),t),r&&(t=Mn(t,Ln|ce|Sn,Kl));for(var i=e.length;i--;)oi(t,e[i]);return t});function Vp(n,e){return cs(n,cr(R(e)))}var jp=fe(function(n,e){return n==null?{}:Ol(n,e)});function cs(n,e){if(n==null)return{};var t=Q(_i(n),function(r){return[r]});return e=R(e),ef(n,t,function(r,i){return e(r,i[0])})}function ng(n,e,t){e=we(e,n);var r=-1,i=e.length;for(i||(i=1,n=u);++r<i;){var s=n==null?u:n[Vn(e[r])];s===u&&(r=i,s=t),n=oe(s)?s.call(n):s}return n}function eg(n,e,t){return n==null?n:dt(n,e,t)}function tg(n,e,t,r){return r=typeof r=="function"?r:u,n==null?n:dt(n,e,t,r)}var hs=Ef(fn),ps=Ef(wn);function rg(n,e,t){var r=W(n),i=r||Se(n)||Ze(n);if(e=R(e,4),t==null){var s=n&&n.constructor;i?t=r?new s:[]:V(n)?t=oe(s)?qe(Ft(n)):{}:t={}}return(i?Wn:Qn)(n,function(a,l,h){return e(t,a,l,h)}),t}function ig(n,e){return n==null?!0:oi(n,e)}function ug(n,e,t){return n==null?n:sf(n,e,ci(t))}function fg(n,e,t,r){return r=typeof r=="function"?r:u,n==null?n:sf(n,e,ci(t),r)}function Xe(n){return n==null?[]:Hr(n,fn(n))}function sg(n){return n==null?[]:Hr(n,wn(n))}function og(n,e,t){return t===u&&(t=e,e=u),t!==u&&(t=Fn(t),t=t===t?t:0),e!==u&&(e=Fn(e),e=e===e?e:0),Te(Fn(n),e,t)}function ag(n,e,t){return e=ae(e),t===u?(t=e,e=0):t=ae(t),n=Fn(n),dl(n,e,t)}function lg(n,e,t){if(t&&typeof t!="boolean"&&_n(n,e,t)&&(e=t=u),t===u&&(typeof e=="boolean"?(t=e,e=u):typeof n=="boolean"&&(t=n,n=u)),n===u&&e===u?(n=0,e=1):(n=ae(n),e===u?(e=n,n=0):e=ae(e)),n>e){var r=n;n=e,e=r}if(t||n%1||e%1){var i=Mu();return hn(n+i*(e-n+Jo("1e-"+((i+"").length-1))),e)}return ui(n,e)}var cg=ze(function(n,e,t){return e=e.toLowerCase(),n+(t?gs(e):e)});function gs(n){return Di(K(n).toLowerCase())}function ds(n){return n=K(n),n&&n.replace(ho,ea).replace(Do,"")}function hg(n,e,t){n=K(n),e=On(e);var r=n.length;t=t===u?r:Te(b(t),0,r);var i=t;return t-=e.length,t>=0&&n.slice(t,i)==e}function pg(n){return n=K(n),n&&zs.test(n)?n.replace(Ki,ta):n}function gg(n){return n=K(n),n&&Vs.test(n)?n.replace(Ir,"\\$&"):n}var dg=ze(function(n,e,t){return n+(t?"-":"")+e.toLowerCase()}),_g=ze(function(n,e,t){return n+(t?" ":"")+e.toLowerCase()}),mg=vf("toLowerCase");function vg(n,e,t){n=K(n),e=b(e);var r=e?Fe(n):0;if(!e||r>=e)return n;var i=(e-r)/2;return tr(Ht(i),t)+n+tr(Jt(i),t)}function yg(n,e,t){n=K(n),e=b(e);var r=e?Fe(n):0;return e&&r<e?n+tr(e-r,t):n}function wg(n,e,t){n=K(n),e=b(e);var r=e?Fe(n):0;return e&&r<e?tr(e-r,t)+n:n}function xg(n,e,t){return t||e==null?e=0:e&&(e=+e),Ta(K(n).replace(Tr,""),e||0)}function Sg(n,e,t){return(t?_n(n,e,t):e===u)?e=1:e=b(e),fi(K(n),e)}function Ag(){var n=arguments,e=K(n[0]);return n.length<3?e:e.replace(n[1],n[2])}var Eg=ze(function(n,e,t){return n+(t?"_":"")+e.toLowerCase()});function Cg(n,e,t){return t&&typeof t!="number"&&_n(n,e,t)&&(e=t=u),t=t===u?Xn:t>>>0,t?(n=K(n),n&&(typeof e=="string"||e!=null&&!Ri(e))&&(e=On(e),!e&&Be(n))?xe(Kn(n),0,t):n.split(e,t)):[]}var Og=ze(function(n,e,t){return n+(t?" ":"")+Di(e)});function Ig(n,e,t){return n=K(n),t=t==null?0:Te(b(t),0,n.length),e=On(e),n.slice(t,t+e.length)==e}function Tg(n,e,t){var r=f.templateSettings;t&&_n(n,e,t)&&(e=u),n=K(n),e=gr({},e,r,Cf);var i=gr({},e.imports,r.imports,Cf),s=fn(i),a=Hr(i,s),l,h,m=0,y=e.interpolate||It,w="__p += '",A=Kr((e.escape||It).source+"|"+y.source+"|"+(y===zi?fo:It).source+"|"+(e.evaluate||It).source+"|$","g"),O="//# sourceURL="+(z.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Uo+"]")+`
`;n.replace(A,function(N,U,J,Tn,mn,Rn){return J||(J=Tn),w+=n.slice(m,Rn).replace(po,ra),U&&(l=!0,w+=`' +
__e(`+U+`) +
'`),mn&&(h=!0,w+=`';
`+mn+`;
__p += '`),J&&(w+=`' +
((__t = (`+J+`)) == null ? '' : __t) +
'`),m=Rn+N.length,N}),w+=`';
`;var L=z.call(e,"variable")&&e.variable;if(!L)w=`with (obj) {
`+w+`
}
`;else if(io.test(L))throw new D(I);w=(h?w.replace(Js,""):w).replace(Hs,"$1").replace(qs,"$1;"),w="function("+(L||"obj")+`) {
`+(L?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+w+`return __p
}`;var P=ms(function(){return q(s,O+"return "+w).apply(u,a)});if(P.source=w,Ti(P))throw P;return P}function Rg(n){return K(n).toLowerCase()}function Lg(n){return K(n).toUpperCase()}function Ng(n,e,t){if(n=K(n),n&&(t||e===u))return Cu(n);if(!n||!(e=On(e)))return n;var r=Kn(n),i=Kn(e),s=Ou(r,i),a=Iu(r,i)+1;return xe(r,s,a).join("")}function Dg(n,e,t){if(n=K(n),n&&(t||e===u))return n.slice(0,Ru(n)+1);if(!n||!(e=On(e)))return n;var r=Kn(n),i=Iu(r,Kn(e))+1;return xe(r,0,i).join("")}function Wg(n,e,t){if(n=K(n),n&&(t||e===u))return n.replace(Tr,"");if(!n||!(e=On(e)))return n;var r=Kn(n),i=Ou(r,Kn(e));return xe(r,i).join("")}function bg(n,e){var t=Os,r=Is;if(V(e)){var i="separator"in e?e.separator:i;t="length"in e?b(e.length):t,r="omission"in e?On(e.omission):r}n=K(n);var s=n.length;if(Be(n)){var a=Kn(n);s=a.length}if(t>=s)return n;var l=t-Fe(r);if(l<1)return r;var h=a?xe(a,0,l).join(""):n.slice(0,l);if(i===u)return h+r;if(a&&(l+=h.length-l),Ri(i)){if(n.slice(l).search(i)){var m,y=h;for(i.global||(i=Kr(i.source,K(Yi.exec(i))+"g")),i.lastIndex=0;m=i.exec(y);)var w=m.index;h=h.slice(0,w===u?l:w)}}else if(n.indexOf(On(i),l)!=l){var A=h.lastIndexOf(i);A>-1&&(h=h.slice(0,A))}return h+r}function Pg(n){return n=K(n),n&&Ks.test(n)?n.replace(qi,la):n}var Mg=ze(function(n,e,t){return n+(t?" ":"")+e.toUpperCase()}),Di=vf("toUpperCase");function _s(n,e,t){return n=K(n),e=t?u:e,e===u?ua(n)?pa(n):Qo(n):n.match(e)||[]}var ms=M(function(n,e){try{return En(n,u,e)}catch(t){return Ti(t)?t:new D(t)}}),Ug=fe(function(n,e){return Wn(e,function(t){t=Vn(t),ie(n,t,Oi(n[t],n))}),n});function Bg(n){var e=n==null?0:n.length,t=R();return n=e?Q(n,function(r){if(typeof r[1]!="function")throw new bn(C);return[t(r[0]),r[1]]}):[],M(function(r){for(var i=-1;++i<e;){var s=n[i];if(En(s[0],this,r))return En(s[1],this,r)}})}function Fg(n){return ll(Mn(n,Ln))}function Wi(n){return function(){return n}}function $g(n,e){return n==null||n!==n?e:n}var Gg=wf(),Jg=wf(!0);function xn(n){return n}function bi(n){return Xu(typeof n=="function"?n:Mn(n,Ln))}function Hg(n){return ku(Mn(n,Ln))}function qg(n,e){return Vu(n,Mn(e,Ln))}var Kg=M(function(n,e){return function(t){return pt(t,n,e)}}),zg=M(function(n,e){return function(t){return pt(n,t,e)}});function Pi(n,e,t){var r=fn(e),i=Xt(e,r);t==null&&!(V(e)&&(i.length||!r.length))&&(t=e,e=n,n=this,i=Xt(e,fn(e)));var s=!(V(t)&&"chain"in t)||!!t.chain,a=oe(n);return Wn(i,function(l){var h=e[l];n[l]=h,a&&(n.prototype[l]=function(){var m=this.__chain__;if(s||m){var y=n(this.__wrapped__),w=y.__actions__=vn(this.__actions__);return w.push({func:h,args:arguments,thisArg:n}),y.__chain__=m,y}return h.apply(n,de([this.value()],arguments))})}),n}function Yg(){return an._===this&&(an._=ya),this}function Mi(){}function Zg(n){return n=b(n),M(function(e){return ju(e,n)})}var Xg=pi(Q),Qg=pi(wu),kg=pi(Br);function vs(n){return wi(n)?Fr(Vn(n)):Il(n)}function Vg(n){return function(e){return n==null?u:Re(n,e)}}var jg=Sf(),nd=Sf(!0);function Ui(){return[]}function Bi(){return!1}function ed(){return{}}function td(){return""}function rd(){return!0}function id(n,e){if(n=b(n),n<1||n>pe)return[];var t=Xn,r=hn(n,Xn);e=R(e),n-=Xn;for(var i=Jr(r,e);++t<n;)e(t);return i}function ud(n){return W(n)?Q(n,Vn):In(n)?[n]:vn(Bf(K(n)))}function fd(n){var e=++ma;return K(n)+e}var sd=er(function(n,e){return n+e},0),od=gi("ceil"),ad=er(function(n,e){return n/e},1),ld=gi("floor");function cd(n){return n&&n.length?Zt(n,xn,jr):u}function hd(n,e){return n&&n.length?Zt(n,R(e,2),jr):u}function pd(n){return Au(n,xn)}function gd(n,e){return Au(n,R(e,2))}function dd(n){return n&&n.length?Zt(n,xn,ri):u}function _d(n,e){return n&&n.length?Zt(n,R(e,2),ri):u}var md=er(function(n,e){return n*e},1),vd=gi("round"),yd=er(function(n,e){return n-e},0);function wd(n){return n&&n.length?Gr(n,xn):0}function xd(n,e){return n&&n.length?Gr(n,R(e,2)):0}return f.after=Hh,f.ary=Xf,f.assign=Lp,f.assignIn=as,f.assignInWith=gr,f.assignWith=Np,f.at=Dp,f.before=Qf,f.bind=Oi,f.bindAll=Ug,f.bindKey=kf,f.castArray=ep,f.chain=zf,f.chunk=lc,f.compact=cc,f.concat=hc,f.cond=Bg,f.conforms=Fg,f.constant=Wi,f.countBy=wh,f.create=Wp,f.curry=Vf,f.curryRight=jf,f.debounce=ns,f.defaults=bp,f.defaultsDeep=Pp,f.defer=qh,f.delay=Kh,f.difference=pc,f.differenceBy=gc,f.differenceWith=dc,f.drop=_c,f.dropRight=mc,f.dropRightWhile=vc,f.dropWhile=yc,f.fill=wc,f.filter=Sh,f.flatMap=Ch,f.flatMapDeep=Oh,f.flatMapDepth=Ih,f.flatten=Jf,f.flattenDeep=xc,f.flattenDepth=Sc,f.flip=zh,f.flow=Gg,f.flowRight=Jg,f.fromPairs=Ac,f.functions=Jp,f.functionsIn=Hp,f.groupBy=Th,f.initial=Cc,f.intersection=Oc,f.intersectionBy=Ic,f.intersectionWith=Tc,f.invert=Kp,f.invertBy=zp,f.invokeMap=Lh,f.iteratee=bi,f.keyBy=Nh,f.keys=fn,f.keysIn=wn,f.map=or,f.mapKeys=Zp,f.mapValues=Xp,f.matches=Hg,f.matchesProperty=qg,f.memoize=lr,f.merge=Qp,f.mergeWith=ls,f.method=Kg,f.methodOf=zg,f.mixin=Pi,f.negate=cr,f.nthArg=Zg,f.omit=kp,f.omitBy=Vp,f.once=Yh,f.orderBy=Dh,f.over=Xg,f.overArgs=Zh,f.overEvery=Qg,f.overSome=kg,f.partial=Ii,f.partialRight=es,f.partition=Wh,f.pick=jp,f.pickBy=cs,f.property=vs,f.propertyOf=Vg,f.pull=Dc,f.pullAll=qf,f.pullAllBy=Wc,f.pullAllWith=bc,f.pullAt=Pc,f.range=jg,f.rangeRight=nd,f.rearg=Xh,f.reject=Mh,f.remove=Mc,f.rest=Qh,f.reverse=Ei,f.sampleSize=Bh,f.set=eg,f.setWith=tg,f.shuffle=Fh,f.slice=Uc,f.sortBy=Jh,f.sortedUniq=qc,f.sortedUniqBy=Kc,f.split=Cg,f.spread=kh,f.tail=zc,f.take=Yc,f.takeRight=Zc,f.takeRightWhile=Xc,f.takeWhile=Qc,f.tap=ch,f.throttle=Vh,f.thru=sr,f.toArray=fs,f.toPairs=hs,f.toPairsIn=ps,f.toPath=ud,f.toPlainObject=os,f.transform=rg,f.unary=jh,f.union=kc,f.unionBy=Vc,f.unionWith=jc,f.uniq=nh,f.uniqBy=eh,f.uniqWith=th,f.unset=ig,f.unzip=Ci,f.unzipWith=Kf,f.update=ug,f.updateWith=fg,f.values=Xe,f.valuesIn=sg,f.without=rh,f.words=_s,f.wrap=np,f.xor=ih,f.xorBy=uh,f.xorWith=fh,f.zip=sh,f.zipObject=oh,f.zipObjectDeep=ah,f.zipWith=lh,f.entries=hs,f.entriesIn=ps,f.extend=as,f.extendWith=gr,Pi(f,f),f.add=sd,f.attempt=ms,f.camelCase=cg,f.capitalize=gs,f.ceil=od,f.clamp=og,f.clone=tp,f.cloneDeep=ip,f.cloneDeepWith=up,f.cloneWith=rp,f.conformsTo=fp,f.deburr=ds,f.defaultTo=$g,f.divide=ad,f.endsWith=hg,f.eq=Yn,f.escape=pg,f.escapeRegExp=gg,f.every=xh,f.find=Ah,f.findIndex=$f,f.findKey=Mp,f.findLast=Eh,f.findLastIndex=Gf,f.findLastKey=Up,f.floor=ld,f.forEach=Yf,f.forEachRight=Zf,f.forIn=Bp,f.forInRight=Fp,f.forOwn=$p,f.forOwnRight=Gp,f.get=Li,f.gt=sp,f.gte=op,f.has=qp,f.hasIn=Ni,f.head=Hf,f.identity=xn,f.includes=Rh,f.indexOf=Ec,f.inRange=ag,f.invoke=Yp,f.isArguments=De,f.isArray=W,f.isArrayBuffer=ap,f.isArrayLike=yn,f.isArrayLikeObject=nn,f.isBoolean=lp,f.isBuffer=Se,f.isDate=cp,f.isElement=hp,f.isEmpty=pp,f.isEqual=gp,f.isEqualWith=dp,f.isError=Ti,f.isFinite=_p,f.isFunction=oe,f.isInteger=ts,f.isLength=hr,f.isMap=rs,f.isMatch=mp,f.isMatchWith=vp,f.isNaN=yp,f.isNative=wp,f.isNil=Sp,f.isNull=xp,f.isNumber=is,f.isObject=V,f.isObjectLike=j,f.isPlainObject=yt,f.isRegExp=Ri,f.isSafeInteger=Ap,f.isSet=us,f.isString=pr,f.isSymbol=In,f.isTypedArray=Ze,f.isUndefined=Ep,f.isWeakMap=Cp,f.isWeakSet=Op,f.join=Rc,f.kebabCase=dg,f.last=Bn,f.lastIndexOf=Lc,f.lowerCase=_g,f.lowerFirst=mg,f.lt=Ip,f.lte=Tp,f.max=cd,f.maxBy=hd,f.mean=pd,f.meanBy=gd,f.min=dd,f.minBy=_d,f.stubArray=Ui,f.stubFalse=Bi,f.stubObject=ed,f.stubString=td,f.stubTrue=rd,f.multiply=md,f.nth=Nc,f.noConflict=Yg,f.noop=Mi,f.now=ar,f.pad=vg,f.padEnd=yg,f.padStart=wg,f.parseInt=xg,f.random=lg,f.reduce=bh,f.reduceRight=Ph,f.repeat=Sg,f.replace=Ag,f.result=ng,f.round=vd,f.runInContext=c,f.sample=Uh,f.size=$h,f.snakeCase=Eg,f.some=Gh,f.sortedIndex=Bc,f.sortedIndexBy=Fc,f.sortedIndexOf=$c,f.sortedLastIndex=Gc,f.sortedLastIndexBy=Jc,f.sortedLastIndexOf=Hc,f.startCase=Og,f.startsWith=Ig,f.subtract=yd,f.sum=wd,f.sumBy=xd,f.template=Tg,f.times=id,f.toFinite=ae,f.toInteger=b,f.toLength=ss,f.toLower=Rg,f.toNumber=Fn,f.toSafeInteger=Rp,f.toString=K,f.toUpper=Lg,f.trim=Ng,f.trimEnd=Dg,f.trimStart=Wg,f.truncate=bg,f.unescape=Pg,f.uniqueId=fd,f.upperCase=Mg,f.upperFirst=Di,f.each=Yf,f.eachRight=Zf,f.first=Hf,Pi(f,function(){var n={};return Qn(f,function(e,t){z.call(f.prototype,t)||(n[t]=e)}),n}(),{chain:!1}),f.VERSION=v,Wn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){f[n].placeholder=f}),Wn(["drop","take"],function(n,e){B.prototype[n]=function(t){t=t===u?1:un(b(t),0);var r=this.__filtered__&&!e?new B(this):this.clone();return r.__filtered__?r.__takeCount__=hn(t,r.__takeCount__):r.__views__.push({size:hn(t,Xn),type:n+(r.__dir__<0?"Right":"")}),r},B.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),Wn(["filter","map","takeWhile"],function(n,e){var t=e+1,r=t==Gi||t==Ns;B.prototype[n]=function(i){var s=this.clone();return s.__iteratees__.push({iteratee:R(i,3),type:t}),s.__filtered__=s.__filtered__||r,s}}),Wn(["head","last"],function(n,e){var t="take"+(e?"Right":"");B.prototype[n]=function(){return this[t](1).value()[0]}}),Wn(["initial","tail"],function(n,e){var t="drop"+(e?"":"Right");B.prototype[n]=function(){return this.__filtered__?new B(this):this[t](1)}}),B.prototype.compact=function(){return this.filter(xn)},B.prototype.find=function(n){return this.filter(n).head()},B.prototype.findLast=function(n){return this.reverse().find(n)},B.prototype.invokeMap=M(function(n,e){return typeof n=="function"?new B(this):this.map(function(t){return pt(t,n,e)})}),B.prototype.reject=function(n){return this.filter(cr(R(n)))},B.prototype.slice=function(n,e){n=b(n);var t=this;return t.__filtered__&&(n>0||e<0)?new B(t):(n<0?t=t.takeRight(-n):n&&(t=t.drop(n)),e!==u&&(e=b(e),t=e<0?t.dropRight(-e):t.take(e-n)),t)},B.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},B.prototype.toArray=function(){return this.take(Xn)},Qn(B.prototype,function(n,e){var t=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=f[r?"take"+(e=="last"?"Right":""):e],s=r||/^find/.test(e);i&&(f.prototype[e]=function(){var a=this.__wrapped__,l=r?[1]:arguments,h=a instanceof B,m=l[0],y=h||W(a),w=function(U){var J=i.apply(f,de([U],l));return r&&A?J[0]:J};y&&t&&typeof m=="function"&&m.length!=1&&(h=y=!1);var A=this.__chain__,O=!!this.__actions__.length,L=s&&!A,P=h&&!O;if(!s&&y){a=P?a:new B(this);var N=n.apply(a,l);return N.__actions__.push({func:sr,args:[w],thisArg:u}),new Pn(N,A)}return L&&P?n.apply(this,l):(N=this.thru(w),L?r?N.value()[0]:N.value():N)})}),Wn(["pop","push","shift","sort","splice","unshift"],function(n){var e=Wt[n],t=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);f.prototype[n]=function(){var i=arguments;if(r&&!this.__chain__){var s=this.value();return e.apply(W(s)?s:[],i)}return this[t](function(a){return e.apply(W(a)?a:[],i)})}}),Qn(B.prototype,function(n,e){var t=f[e];if(t){var r=t.name+"";z.call(He,r)||(He[r]=[]),He[r].push({name:e,func:t})}}),He[nr(u,G).name]=[{name:"wrapper",func:u}],B.prototype.clone=Pa,B.prototype.reverse=Ma,B.prototype.value=Ua,f.prototype.at=hh,f.prototype.chain=ph,f.prototype.commit=gh,f.prototype.next=dh,f.prototype.plant=mh,f.prototype.reverse=vh,f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=yh,f.prototype.first=f.prototype.head,ft&&(f.prototype[ft]=_h),f},$e=ga();Ee?((Ee.exports=$e)._=$e,br._=$e):an._=$e}).call(wt)})(dr,dr.exports);var Od=dr.exports;const $n=Cd(Od),Id=(o,p="")=>o===void 0?($.set({message:"Name field is missing.",type:"error",duration:36e5}),!1):typeof o!="string"?($.set({message:"Name field has to be a string.",type:"error",duration:36e5}),!1):Es(o)?p!==""&&!Pd(o,Array.from(F(We).values()),p)?($.set({message:"Component name has to be unique.",type:"error",duration:36e5}),!1):(ne.update(u=>{let v={...u};return v.json.name=o,v}),$.set(null),!0):($.set({message:"Name field is invalid.",type:"error",duration:36e5}),!1),kd=(o,p="")=>{try{const u=JSON.parse(o);if(!Id(u.name,p))return!1;const v={...F(ne)};if(u.elements)if(Array.isArray(u.elements))if(u.elements.every(xs)){if(u.elements.length===0)return $.set({message:"Component must have at least one element.",type:"info",duration:36e5}),!1;v.json.elements=u.elements}else return $.set({message:"Some elements are invalid. Please check the element properties.",type:"info",duration:36e5}),!1;else return $.set({message:"Elements field in JSON has to be an array.",type:"error",duration:36e5}),!1;else return $.set({message:"Elements field is missing from JSON.",type:"error",duration:36e5}),!1;return ne.set(v),$.set(null),!0}catch{return $.set({message:"Component JSON is not valid.",type:"info",duration:36e5}),!1}},Vd=o=>{let p=Rd(o);return p.valid?!0:($.set({message:p.message,type:"info",duration:36e5}),!1)},Td=(o,p)=>o.type==="GearElement"&&o.parent&&o.parent!==o.name&&p.find(u=>u.type==="GearElement"&&u.name===o.parent)!==void 0,Rd=o=>{var C;let p=!0,u="";const v=["ShaftDiscrete","ShaftContinuous"];o.length>1&&v.includes((C=o.at(0))==null?void 0:C.type)&&(p=!1,u="Component can't start with a shaft.");let d=As(o),x;for(let I of o){if(v.includes(I.type)&&v.includes(x==null?void 0:x.type)){p=!1,u="Two shafts can't be connected.";break}if(I.type==="Disk"&&(x==null?void 0:x.type)==="GearElement"){p=!1,u="Disk element can't be connected to a gear element.";break}if(I.type==="GearElement"&&!Td(I,o)&&((x==null?void 0:x.type)==="Disk"||(x==null?void 0:x.type)==="GearElement")){p=!1,u="Gear element can only be connected to a shaft.";break}if(o.length>1&&v.includes(I.type)&&d.includes(I.name)){p=!1,u="Output elements can't be shafts.";break}x=I}return{valid:p,message:u}},As=o=>{const p=[];for(let u=0;u<o.length;u++){const v=o[u+1];(u===o.length-1||v.type==="GearElement"&&v.parent&&o.slice(0,u+1).map(d=>d.name).includes(v.parent))&&p.push(o[u].name)}return p},jd=(o,p,u,v=!1)=>{o||(o=[]);let d=[...o];return d.forEach((x,C)=>{if(x.name===p){let I={...x,...u};if(v){const k=Object.keys(u).filter(S=>u[S]===void 0||u[S]==="");I=$n.omit(I,k)}d[C]=I}}),d},Ld=o=>{const p=o.map(d=>d.name);let u="New Component",v=2;for(;p.includes(u);)u=`New Component (${v})`,v++;return u},xt=(o,p)=>{const u=d=>{const x=d.name.split(" ");return x.slice(0,-1).join(" ")===o?parseInt(x.at(-1)||"0"):null},v=p.map(u).filter(d=>d!==null).sort((d,x)=>d-x).at(-1);return`${o} ${v?v+1:1}`},Nd=(o,p)=>{if(p==="Disk")return{name:xt("Disk",o),type:"Disk",damping:0,inertia:5720};if(p==="ShaftDiscrete")return{name:xt("Shaft",o),type:"ShaftDiscrete",damping:0,stiffness:449e7};if(p==="ShaftContinuous")return{name:xt("Shaft",o),type:"ShaftContinuous",damping:0,length:100,innerDiameter:14,outerDiameter:20};if(p==="GearElement")return{name:xt("Gear",o),type:"GearElement",inertia:5720,diameter:230};throw new Error("Invalid element type")},n0=o=>{ne.update(p=>{let u={...p};return u.json.elements=[...p.json.elements,Nd(p.json.elements?p.json.elements:[],o)],u})},Dd=o=>{let p=0,u={};return o.forEach((v,d)=>{var x;v.type==="ShaftDiscrete"||v.type==="ShaftContinuous"?(u[v.name]=`${p}-${p+1}`,o[d+1]&&o[d+1].type!=="ShaftDiscrete"&&o[d+1].type!=="ShaftContinuous"&&(p+=1)):v.type==="GearElement"?(u[v.name]=p.toString(),v.parent&&v.parent!==v.name&&((x=o.find(C=>C.name===v.parent))==null?void 0:x.type)==="GearElement"&&(p+=1)):u[v.name]=p.toString()}),u},e0=o=>{const p=F(ne).json,u=[];p.elements.length===0&&u.push({id:"empty",type:"Empty",dragHandle:".none",data:{label:""},position:{x:0,y:150}});let v=0,d=150,x=new Map,C=Dd(p.elements);p.elements.forEach((S,cn)=>{S.type==="Disk"?(u.push({id:`${cn+1}`,type:S.type,dragHandle:".none",data:{nodeNo:C[S.name],data:$n.pick(S,[...Qe[S.type].required,...Qe[S.type].optional])},position:{x:v,y:d}}),v+=21):S.type==="ShaftDiscrete"||S.type==="ShaftContinuous"?(u.push({id:`${cn+1}`,type:S.type,dragHandle:".none",data:{nodeNo:C[S.name],data:$n.pick(S,[...Qe[S.type].required,...Qe[S.type].optional])},position:{x:v,y:d}}),v+=72):S.type==="GearElement"&&(S.parent&&x.get(S.parent)&&S.name!==S.parent?(x.set(S.name,x.get(S.parent)),d+=100,x.get(S.name).endY=d,x.get(S.name).count=x.get(S.name).count+1,v=x.get(S.parent).x):x.set(S.name,{x:v,startY:d,endY:d,count:1}),u.push({id:`${cn+1}`,type:S.type,dragHandle:".none",data:{nodeNo:C[S.name],data:$n.pick(S,[...Qe[S.type].required,...Qe[S.type].optional])},position:{x:v,y:d}}),v+=21)});let I=[];return new Set(x.values()).forEach(S=>{S.count>1&&I.push({id:`gearbox-${S.x}`,type:"Gearbox",draggable:!1,data:{height:S.endY-S.startY,count:S.count},position:{x:S.x,y:S.startY}})}),u.push(...I),u.reverse()},t0=o=>{const p=F(sn),u=o.split(".")[0],v=o.split(".")[1],d=p.json.components.find(x=>x.name===u);return d==null?void 0:d.elements.find(x=>x.name===v)},r0=o=>{const p=JSON.stringify(o,null,2),u=new Blob([p],{type:"application/json"}),v=URL.createObjectURL(u),d=document.createElement("a");d.href=v,d.download=o.name+".json",document.body.appendChild(d),d.click(),URL.revokeObjectURL(v),document.body.removeChild(d)},i0=(o,p=!0)=>{const u=o.target;if(!u.files||u.files.length===0)return;const v=u.files[0];if(v){const d=new FileReader;d.onload=x=>{var C;try{const I=JSON.parse((C=x.target)==null?void 0:C.result);if(Ss(I)){const k=Array.from(F(jn).values()).map(S=>S.name);if(k.includes(I.name)){let S=2;for(;k.includes(I.name+` (${S})`);)S++;I.name=I.name+` (${S})`}if(p){let[S,cn]=qd(ws(I),!0);Sd(`/system-editor/${S}`)}else sn.update(S=>({...S,json:ws(I)}))}else if($i(I))$.set({message:"Imported JSON file is a component. Please import a system JSON file.",type:"error",duration:3e3});else throw new Error}catch{$.set({message:"Imported JSON file is invalid. Please check the file and try again.",type:"error",duration:3e3})}},d.readAsText(v)}},u0=(o,p=!0)=>{const u=o.target;if(!u.files||u.files.length===0)return;const v=u.files[0];if(v){const d=new FileReader;d.onload=x=>{var C;try{const I=JSON.parse((C=x.target)==null?void 0:C.result);if($i(I)){const k=Array.from(F(We).entries()).filter(([S,cn])=>S.startsWith(`${F(sn).id}-`)).map(([S,cn])=>cn.name);if(k.includes(I.name)){let S=2;for(;k.includes(I.name+` (${S})`);)S++;I.name=I.name+` (${S})`}p?Jd(Fi(I),!0):ne.update(S=>({...S,json:Fi(I)}))}else if(Ss(I))$.set({message:"Imported JSON file is a system. Please import a component JSON file.",type:"error",duration:3e3});else throw new Error}catch{$.set({message:"Imported JSON file is invalid. Please check the file and try again.",type:"error",duration:3e3})}},d.readAsText(v)}},ws=o=>{let p={...o};return p.components=p.components.map(u=>Fi(u)),p},Fi=o=>{let p={...o};return p.elements=o.elements.map(u=>Wd(u,p.elements)),p},Wd=(o,p)=>{let u={...o};return u.name||(u.name=xt(u.type,p)),u.damping||(u.damping=0),u},f0=(o,p,u,v)=>{const d={...o},x=d[p].findIndex(S=>S[u]===v),C=JSON.stringify(d[p][x],null,2).split(`
`).length;d[p]=d[p].slice(0,x);const I=d[p].length===0?1:0;bd(d,p);const k=JSON.stringify(d,null,2).split(`
`).length+I-1;return[k,k+C]},bd=(o,p)=>{const u=$n.keys(o),v=$n.indexOf(u,p);if(v!==-1){const d=$n.slice(u,v+1);$n.forEach(d,x=>{delete o[x]})}},Es=o=>o!==""&&!o.includes("'")&&!o.includes('"')&&!o.includes("`")&&!o.includes("\\")&&!o.includes("/")&&!o.includes(`
`)&&!o.includes("	")&&!o.includes("."),Pd=(o,p,u="")=>{const v=o.toUpperCase().replaceAll(" ","");return!p.filter(d=>d.name!==u).map(d=>d.name.toUpperCase().replaceAll(" ","")).includes(v)},s0=o=>{if(isNaN(Date.parse(o)))return"";const p=new Date(o),u=k=>k.toString().padStart(2,"0"),v=u(p.getDate()),d=u(p.getMonth()+1),x=p.getFullYear(),C=u(p.getHours()),I=u(p.getMinutes());return`${v}.${d}.${x} ${C}:${I}`},o0=(o,p)=>o.length<=p?o:o.slice(0,p-3)+"...",a0=o=>o.replace(/([A-Z])/g," $1").toLowerCase(),l0=o=>{var d,x;let p=F(sn).json;if(p.components.length===1)return;let u={};p.structure.forEach(C=>{u[C[0].split(".")[0]]=C[1].split(".")[0]});let v=p.components.map(C=>C.name).find(C=>!Object.keys(u).includes(C));if(v){const C=(x=(d=p.components.find(I=>I.name===v))==null?void 0:d.elements.at(-1))==null?void 0:x.name;p.structure.push([`${v}.${C}`,`${o.name}.${o.elements[0].name}`]),sn.update(I=>({...I,json:p}))}else $.set({message:"Components are connected in a loop.",type:"error",duration:8e3})},c0=(o,p)=>{let u=F(sn),v=F(p),d=[];u.json.components.forEach(T=>{const G=F(o).find(H=>H.id===T.name);if(G)d.push(G);else{let H={id:T.name,type:"component",draggable:!1,data:T,position:{x:0,y:0},origin:[.5,.5]};d.push(H)}}),u.json.structure.forEach(T=>{let G=T[0],H=T[1];if(!v.find(on=>on.id===`${G}..${H}`)){let on={id:`${G}..${H}`,source:G.split(".")[0],target:H.split(".")[0],sourceHandle:G,targetHandle:H,class:""};p.update(gn=>[...gn,on])}});let x=u.json.structure.map(T=>`${T[0]}..${T[1]}`);p.update(T=>T.filter(G=>x.includes(G.id)));const C=270,I=F(sn).json.components.map(T=>T.name),k=F(sn).json.structure,S=F(p).map(T=>T.target),cn=F(p).map(T=>T.source),Ln=I.filter(T=>!S.includes(T)),ce=I.filter(T=>!cn.includes(T)),Sn=new Map;ce.forEach(T=>{var H,tn;Sn.set(T,1);let G=(H=k.find(on=>on[1].split(".")[0]===T))==null?void 0:H[0].split(".")[0];for(;G;)Sn.set(G,(Sn.get(G)||0)+1),G=(tn=k.find(on=>on[1].split(".")[0]===G))==null?void 0:tn[0].split(".")[0]});let An=0;const Gn=(T,G,H,tn)=>{const on=T.id,gn=(Sn.get(on)||0)*C;T.position.x=G,T.position.y=H+gn/2,T.parentId=tn,T.expandParent=!0;const he=F(p).filter(Jn=>Jn.source===on).map(Jn=>d.find(ke=>ke.id===Jn.target));let Nn=H;return he.forEach(Jn=>{G+C>An&&(An=G+C),Nn=Gn(Jn,G+C,Nn,tn)}),H+=gn,H};Ln.forEach(T=>{const G=d.find(H=>H.id===T);if(G){let H=F(o).find(tn=>tn.id===`group.${T}`);H||(H={id:`group.${T}`,type:"group",data:{},draggable:!1,position:{x:An,y:0},origin:[.5,.5],style:"display: none;"}),d.unshift(H),Gn(G,0,0,`group.${T}`),An+=C*1.5}}),o.set(d)},Md=o=>new Set(o).size!==o.length,Ud=(o,p=null)=>!Array.from(F(jn).entries()).filter(([v,d])=>v!==p).map(([v,d])=>d.name.replace(" ","").toUpperCase()).includes(o.replace(" ","").toUpperCase()),Bd=(o,p=null)=>o===void 0?($.set({message:"Name field is missing from JSON.",type:"error",duration:36e5}),!1):typeof o!="string"?($.set({message:"Name field in JSON has to be a string.",type:"error",duration:36e5}),!1):Es(o)?Ud(o,p)?(sn.update(u=>{let v={...u};return v.json.name=o,v}),!0):($.set({message:"System name has to be unique.",type:"error",duration:36e5}),!1):($.set({message:"Name field in JSON is invalid.",type:"error",duration:36e5}),!1),h0=()=>{var C,I,k;const o=F(sn).json,p=o.structure.map(S=>S[0].split(".")[0]),u=o.structure.map(S=>S[1].split(".")[0]),v=o.components.filter(S=>p.includes(S.name)&&!u.includes(S.name)),d=o.components.filter(S=>!p.includes(S.name)&&u.includes(S.name));if(v.length>1)return $.set({message:"System can't consist of multiple connected pieces.",type:"info",duration:36e5}),!1;const x=["ShaftDiscrete","ShaftContinuous"];for(let S of v)if(x.includes(S.elements[0].type))return $.set({message:"System can't start with a shaft.",type:"info",duration:36e5}),!1;for(let S of d)if(x.includes((C=S.elements.at(-1))==null?void 0:C.type))return $.set({message:"System can't end with a shaft.",type:"info",duration:36e5}),!1;for(let S of o.structure){const[cn,Ln]=S[0].split("."),ce=o.components.find(H=>H.name===cn),[Sn,An]=S[1].split("."),Gn=o.components.find(H=>H.name===Sn),T=(I=ce==null?void 0:ce.elements.find(H=>H.name===Ln))==null?void 0:I.type,G=(k=Gn==null?void 0:Gn.elements.find(H=>H.name===An))==null?void 0:k.type;if(x.includes(T)&&x.includes(G))return $.set({message:"System can't contain two shaft elements connected.",type:"info",duration:36e5}),!1;if(T==="Disk"&&G==="GearElement")return $.set({message:"System can't contain a disk connected to a gear element.",type:"info",duration:36e5}),!1;if(T==="GearElement"&&!x.includes(G))return $.set({message:"System can't contain a gear element connected to a non-shaft element.",type:"info",duration:36e5}),!1}return!0},p0=(o,p=null)=>{try{const u=JSON.parse(o),v={...F(sn).json};if(!Bd(u.name,p))return!1;if(u.date){if(typeof u.date!="string")return $.set({message:"Date field in JSON has to be a string in ISO 8601 format.",type:"error",duration:36e5}),!1;v.date=u.date}else return $.set({message:"Date field is missing from JSON.",type:"error",duration:36e5}),!1;if(u.components){if(u.components.some(d=>!Ad(d)))return $.set({message:"Some component(s) in JSON are invalid.",type:"error",duration:36e5}),!1;if(Md(u.components.map(d=>d.name)))return $.set({message:"Component names in JSON are not unique.",type:"error",duration:36e5}),!1;v.components=u.components}else return $.set({message:"Components field is missing from JSON.",type:"error",duration:36e5}),!1;if(u.structure){if(!Array.isArray(u.structure)||u.structure.some(d=>!Array.isArray(d)))return $.set({message:"Structure field in JSON has to be an array of name pairs.",type:"error",duration:36e5}),!1;if(Fd(u.structure))v.structure=u.structure;else return $.set({message:"Structure defined in JSON is invalid.",type:"error",duration:36e5}),!1}else return $.set({message:"Structure field is missing from JSON.",type:"error",duration:36e5}),!1;return sn.update(d=>({...d,json:v})),!0}catch{return $.set({message:"System JSON is not valid.",type:"info",duration:36e5}),!1}},Fd=o=>{for(let p of o){const u=F(sn).json.components.find(d=>d.name===p[0].split(".")[0]);if(!u||!As(u.elements).includes(p[0].split(".")[1]))return!1;const v=F(sn).json.components.find(d=>d.name===p[1].split(".")[0]);if(!v||p[1].split(".")[1]!==v.elements[0].name)return!1}return!!Gd(o)},g0=(o,p)=>{const u=d=>{const x=d.name.split(" ");return x.slice(0,-1).join(" ")===o?parseInt(x.at(-1)||"0"):null},v=p.map(u).filter(d=>d!==null).sort((d,x)=>d-x).at(-1);return`${o} ${v?v+1:1}`},$d=o=>{const p=o.map(d=>d.name);let u="New System",v=2;for(;p.includes(u);)u=`New System (${v})`,v++;return u},Gd=o=>{let p=[];for(let u of o){const v=u[0].split(".")[0],d=u[1].split(".")[0];let x=p.find(I=>I.has(v)),C=p.find(I=>I.has(d));if(x&&C)if(x!==C)p=p.filter(I=>I!==x&&I!==C),p.push(new Set([...x,...C]));else return!1;else x?x.add(d):C?C.add(v):p.push(new Set([v,d]))}return!0},$=_r(null),d0=_r((o,p)=>{}),_0=_r(null),We=mr("customComponents",new Map),m0=o=>$n.cloneDeep(F(We).get(o))||null,Jd=(o=null,p=!1)=>{const u=Array.from(F(We).keys()).filter(x=>x.startsWith(`${F(sn).id}-`)).map(x=>x.split("-")[1]),v=Array.from(F(We).entries()).filter(([x,C])=>x.startsWith(`${F(sn).id}-`)).map(([x,C])=>C),d=`${F(sn).id}-${Cs(u)}`;return o||(o={name:Ld(v),elements:[]}),ne.set({id:d,json:o}),p&&Hd(),[d,o]},v0=o=>{We.update(p=>(p.delete(o),p))},ne=mr("currentComponentJSON",{id:"",json:{name:"",elements:[]}}),y0=()=>{ne.set({id:"",json:{name:"",elements:[]}})},Hd=()=>{We.update(o=>(o.set(F(ne).id,$n.cloneDeep(F(ne).json)),o))},jn=mr("systems",new Map),w0=(o,p)=>{jn.update(u=>(u.set(o,$n.cloneDeep(p)),u))},x0=o=>$n.cloneDeep(F(jn).get(o))||null,qd=(o=null,p=!1)=>{const u=Cs(Array.from(F(jn).keys()));return o?o=o:o={name:$d(Array.from(F(jn).values())),date:new Date().toISOString(),components:[],structure:[]},p&&jn.update(v=>(v.set(u,o),v)),[u,o]},S0=o=>{Array.from(F(jn).keys()).includes(o)&&sn.set({id:o,json:F(jn).get(o)})},A0=o=>{jn.update(p=>(p.delete(o),p))},sn=mr("currentSystemJSON",{id:"",json:{name:"",date:"",components:[],structure:[]}}),Cs=o=>{const p=()=>{const v="abcdefghijklmnopqrstuvwxyz0123456789";let d="";for(let x=0;x<6;x++)d+=v.charAt(Math.floor(Math.random()*v.length));return d};let u=p();for(;o.includes(u);)u=p();return u};export{w0 as A,p0 as B,r0 as C,Bd as D,Xd as E,a0 as F,ne as G,Yd as H,jd as I,Zd as J,Nd as K,Qe as L,e0 as M,n0 as N,Dd as O,S0 as P,m0 as Q,Vd as R,kd as S,Hd as T,y0 as U,Id as V,$n as _,o0 as a,sn as b,qd as c,x0 as d,We as e,s0 as f,Cd as g,Qd as h,wt as i,i0 as j,As as k,d0 as l,f0 as m,$ as n,g0 as o,t0 as p,Gd as q,A0 as r,jn as s,_0 as t,c0 as u,l0 as v,Jd as w,v0 as x,u0 as y,h0 as z};
